<!DOCTYPE html>
<html lang=zh>
<head>
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <meta name="description" content="代码编写注意事项： 1. 非浮点数部分的题目，常数只能用0~0xFF，类型只能用int。 2. 变量声明应该放在函数最开头，否则dlc会报错。这其实是C89的标准，现在已经取消。 3. 本实验中容易遇到的运算符优先级问题：+ -优先于&lt;&lt; &gt;&gt;；&#x3D;&#x3D;优先于&amp;；&amp;优先于^；^优先于|。背不下来只需要无脑打括号就行了。 P1  tconst - return a">
<meta property="og:type" content="article">
<meta property="og:title" content="DataLab writeup">
<meta property="og:url" content="https://cjinfdu.github.io/ics/datalab-comment/index.html">
<meta property="og:site_name" content="COMP130201.02 计算机系统基础">
<meta property="og:description" content="代码编写注意事项： 1. 非浮点数部分的题目，常数只能用0~0xFF，类型只能用int。 2. 变量声明应该放在函数最开头，否则dlc会报错。这其实是C89的标准，现在已经取消。 3. 本实验中容易遇到的运算符优先级问题：+ -优先于&lt;&lt; &gt;&gt;；&#x3D;&#x3D;优先于&amp;；&amp;优先于^；^优先于|。背不下来只需要无脑打括号就行了。 P1  tconst - return a">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2023-10-12T01:40:00.000Z">
<meta property="article:modified_time" content="2023-10-12T01:36:44.288Z">
<meta property="article:author" content="FDUICS-2023助教组">
<meta name="twitter:card" content="summary">
    
    
        
          
              <link rel="shortcut icon" href="/ics/images/favicon.ico">
          
        
        
          
            <link rel="icon" type="image/png" href="/ics/images/android-chrome-192x192.png" sizes="192x192">
          
        
        
          
            <link rel="apple-touch-icon" sizes="180x180" href="/ics/images/apple-touch-icon.png">
          
        
    
    <!-- title -->
    <title>DataLab writeup</title>
    <!-- styles -->
    
<link rel="stylesheet" href="/ics/css/style.css">

    <!-- rss -->
    
    
<meta name="generator" content="Hexo 6.3.0"><style>mjx-container[jax="SVG"] {
  direction: ltr;
}

mjx-container[jax="SVG"] > svg {
  overflow: visible;
}

mjx-container[jax="SVG"][display="true"] {
  display: block;
  text-align: center;
  margin: 1em 0;
}

mjx-container[jax="SVG"][justify="left"] {
  text-align: left;
}

mjx-container[jax="SVG"][justify="right"] {
  text-align: right;
}

g[data-mml-node="merror"] > g {
  fill: red;
  stroke: red;
}

g[data-mml-node="merror"] > rect[data-background] {
  fill: yellow;
  stroke: none;
}

g[data-mml-node="mtable"] > line[data-line] {
  stroke-width: 70px;
  fill: none;
}

g[data-mml-node="mtable"] > rect[data-frame] {
  stroke-width: 70px;
  fill: none;
}

g[data-mml-node="mtable"] > .mjx-dashed {
  stroke-dasharray: 140;
}

g[data-mml-node="mtable"] > .mjx-dotted {
  stroke-linecap: round;
  stroke-dasharray: 0,140;
}

g[data-mml-node="mtable"] > svg {
  overflow: visible;
}

[jax="SVG"] mjx-tool {
  display: inline-block;
  position: relative;
  width: 0;
  height: 0;
}

[jax="SVG"] mjx-tool > mjx-tip {
  position: absolute;
  top: 0;
  left: 0;
}

mjx-tool > mjx-tip {
  display: inline-block;
  padding: .2em;
  border: 1px solid #888;
  font-size: 70%;
  background-color: #F8F8F8;
  color: black;
  box-shadow: 2px 2px 5px #AAAAAA;
}

g[data-mml-node="maction"][data-toggle] {
  cursor: pointer;
}

mjx-status {
  display: block;
  position: fixed;
  left: 1em;
  bottom: 1em;
  min-width: 25%;
  padding: .2em .4em;
  border: 1px solid #888;
  font-size: 90%;
  background-color: #F8F8F8;
  color: black;
}

foreignObject[data-mjx-xml] {
  font-family: initial;
  line-height: normal;
  overflow: visible;
}

.MathJax path {
  stroke-width: 3;
}

mjx-container[display="true"] {
  overflow: auto hidden;
}

mjx-container[display="true"] + br {
  display: none;
}
</style></head>

<body>
    
      <div id="header-post">
  <a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
         
          <li><a href="/ics/">Home</a></li>
         
          <li><a href="/ics/staff/">Staff</a></li>
         
          <li><a target="_blank" rel="noopener" href="https://github.com/cjinfdu/ics">Github</a></li>
        
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        <li><a class="icon" href="/ics/CoroutineLab/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover="$('#i-prev').toggle();" onmouseout="$('#i-prev').toggle();"></i></a></li>
        
        
        <li><a class="icon" href="/ics/BombLab/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i></a></li>
        
        <li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i></a></li>
        <li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i></a></li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">Previous post</span>
      <span id="i-next" class="info" style="display:none;">Next post</span>
      <span id="i-top" class="info" style="display:none;">Back to top</span>
      <span id="i-share" class="info" style="display:none;">Share post</span>
    </span>
    <br/>
    <div id="share" style="display: none">
      <ul>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=https://cjinfdu.github.io/ics/datalab-comment/"><i class="fa fa-facebook " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=https://cjinfdu.github.io/ics/datalab-comment/&text=DataLab writeup"><i class="fa fa-twitter " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=https://cjinfdu.github.io/ics/datalab-comment/&title=DataLab writeup"><i class="fa fa-linkedin " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=https://cjinfdu.github.io/ics/datalab-comment/&is_video=false&description=DataLab writeup"><i class="fa fa-pinterest " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=DataLab writeup&body=Check out this article: https://cjinfdu.github.io/ics/datalab-comment/"><i class="fa fa-envelope " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=https://cjinfdu.github.io/ics/datalab-comment/&title=DataLab writeup"><i class="fa fa-get-pocket " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=https://cjinfdu.github.io/ics/datalab-comment/&title=DataLab writeup"><i class="fa fa-reddit " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=https://cjinfdu.github.io/ics/datalab-comment/&title=DataLab writeup"><i class="fa fa-stumbleupon " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=https://cjinfdu.github.io/ics/datalab-comment/&title=DataLab writeup"><i class="fa fa-digg " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=https://cjinfdu.github.io/ics/datalab-comment/&name=DataLab writeup&description="><i class="fa fa-tumblr " aria-hidden="true"></i></a></li>
</ul>

    </div>
    <div id="toc">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#p1"><span class="toc-number">1.</span> <span class="toc-text">P1</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#p2"><span class="toc-number">2.</span> <span class="toc-text">P2</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#p3"><span class="toc-number">3.</span> <span class="toc-text">P3</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#p4"><span class="toc-number">4.</span> <span class="toc-text">P4</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#p5"><span class="toc-number">5.</span> <span class="toc-text">P5</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#p6"><span class="toc-number">6.</span> <span class="toc-text">P6</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#p7"><span class="toc-number">7.</span> <span class="toc-text">P7</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#p8"><span class="toc-number">8.</span> <span class="toc-text">P8</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#p9"><span class="toc-number">9.</span> <span class="toc-text">P9</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#p10"><span class="toc-number">10.</span> <span class="toc-text">P10</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#p11"><span class="toc-number">11.</span> <span class="toc-text">P11</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#p12"><span class="toc-number">12.</span> <span class="toc-text">P12</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#p13"><span class="toc-number">13.</span> <span class="toc-text">P13</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#p14"><span class="toc-number">14.</span> <span class="toc-text">P14</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#p15"><span class="toc-number">15.</span> <span class="toc-text">P15</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#p16"><span class="toc-number">16.</span> <span class="toc-text">P16</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#p17"><span class="toc-number">17.</span> <span class="toc-text">P17</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#p18"><span class="toc-number">18.</span> <span class="toc-text">P18</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#p19"><span class="toc-number">19.</span> <span class="toc-text">P19</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#p20"><span class="toc-number">20.</span> <span class="toc-text">P20</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#p21"><span class="toc-number">21.</span> <span class="toc-text">P21</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#p22"><span class="toc-number">22.</span> <span class="toc-text">P22</span></a></li></ol>
    </div>
  </span>
</div>

    
    <div class="content index width mx-auto px2 my4">
        
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    
    <h1 class="posttitle" itemprop="name headline">
        DataLab writeup
    </h1>



    <div class="meta">
      <span class="author" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span itemprop="name">COMP130201.02 计算机系统基础</span>
      </span>
      
    <div class="postdate">
        <time datetime="2023-10-12T01:40:00.000Z" itemprop="datePublished">2023-10-12</time>
    </div>


      

    </div>
  </header>
  

  <div class="content" itemprop="articleBody">
    <p>代码编写注意事项： 1. 非浮点数部分的题目，常数只能用<code>0~0xFF</code>，类型只能用<code>int</code>。 2. 变量声明应该放在函数最开头，否则<code>dlc</code>会报错。这其实是C89的标准，现在已经取消。 3. 本实验中容易遇到的运算符优先级问题：<code>+ -</code>优先于<code>&lt;&lt; &gt;&gt;</code>；<strong><code>==</code>优先于<code>&amp;</code></strong>；<code>&amp;</code>优先于<code>^</code>；<code>^</code>优先于<code>|</code>。背不下来只需要无脑打括号就行了。</p>
<h2 id="p1">P1</h2>
<blockquote>
<p>tconst - return a constant value 0xFFFFFFE0 Legal ops: ! ~ &amp; ^ | + &lt;&lt; &gt;&gt; Max ops: 2 Rating: 1</p>
</blockquote>
<p>输出一个常数，二进制下最低5位是0，其它全为1。 由于我们只能使用255（8位）及以下的常数，考虑最后5位赋值为0，然后取反。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">tconst</span><span class="params">(<span class="type">void</span>)</span> {</span><br><span class="line">    <span class="type">int</span> x = <span class="number">0x1F</span>;</span><br><span class="line">    <span class="keyword">return</span> ~x;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<h2 id="p2">P2</h2>
<blockquote>
<p>bitNand - return ~(x&amp;y) using only ~ and | Example: bitNand(4, 5) = -5, bitNand(3, 11) = -4 Legal ops: ~ | Max ops: 6 Rating: 2</p>
</blockquote>
<p>按位与非，相当于按位与取反。 由德摩根定律<span class="math inline"><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.464ex;" xmlns="http://www.w3.org/2000/svg" width="12.874ex" height="2.534ex" role="img" focusable="false" viewBox="0 -915 5690.4 1120"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mover"><g data-mml-node="mrow"><g data-mml-node="mi"><path data-c="1D465" d="M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z"></path></g><g data-mml-node="mo" transform="translate(794.2,0)"><path data-c="2227" d="M318 591Q325 598 333 598Q344 598 348 591Q349 590 414 445T545 151T611 -4Q609 -22 591 -22Q588 -22 586 -21T581 -20T577 -17T575 -13T572 -9T570 -4L333 528L96 -4Q87 -20 80 -21Q78 -22 75 -22Q57 -22 55 -4Q55 2 120 150T251 444T318 591Z"></path></g><g data-mml-node="mi" transform="translate(1683.4,0)"><path data-c="1D466" d="M21 287Q21 301 36 335T84 406T158 442Q199 442 224 419T250 355Q248 336 247 334Q247 331 231 288T198 191T182 105Q182 62 196 45T238 27Q261 27 281 38T312 61T339 94Q339 95 344 114T358 173T377 247Q415 397 419 404Q432 431 462 431Q475 431 483 424T494 412T496 403Q496 390 447 193T391 -23Q363 -106 294 -155T156 -205Q111 -205 77 -183T43 -117Q43 -95 50 -80T69 -58T89 -48T106 -45Q150 -45 150 -87Q150 -107 138 -122T115 -142T102 -147L99 -148Q101 -153 118 -160T152 -167H160Q177 -167 186 -165Q219 -156 247 -127T290 -65T313 -9T321 21L315 17Q309 13 296 6T270 -6Q250 -11 231 -11Q185 -11 150 11T104 82Q103 89 103 113Q103 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Z"></path></g></g><g data-mml-node="mo" transform="translate(0,530)"><svg width="2173.4" height="237" x="0" y="148" viewBox="543.4 148 2173.4 237"><path data-c="2013" d="M0 248V285H499V248H0Z" transform="scale(6.52,1)"></path></svg></g></g><g data-mml-node="mo" transform="translate(2451.2,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path></g><g data-mml-node="mover" transform="translate(3507,0)"><g data-mml-node="mi"><path data-c="1D465" d="M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z"></path></g><g data-mml-node="mo" transform="translate(0,374)"><svg width="572" height="237" x="0" y="148" viewBox="143 148 572 237"><path data-c="2013" d="M0 248V285H499V248H0Z" transform="scale(1.716,1)"></path></svg></g></g><g data-mml-node="mo" transform="translate(4301.2,0)"><path data-c="2228" d="M55 580Q56 587 61 592T75 598Q86 598 96 580L333 48L570 580Q579 596 586 597Q588 598 591 598Q609 598 611 580Q611 574 546 426T415 132T348 -15Q343 -22 333 -22T318 -15Q317 -14 252 131T121 425T55 580Z"></path></g><g data-mml-node="mover" transform="translate(5190.4,0)"><g data-mml-node="mi" transform="translate(5,0)"><path data-c="1D466" d="M21 287Q21 301 36 335T84 406T158 442Q199 442 224 419T250 355Q248 336 247 334Q247 331 231 288T198 191T182 105Q182 62 196 45T238 27Q261 27 281 38T312 61T339 94Q339 95 344 114T358 173T377 247Q415 397 419 404Q432 431 462 431Q475 431 483 424T494 412T496 403Q496 390 447 193T391 -23Q363 -106 294 -155T156 -205Q111 -205 77 -183T43 -117Q43 -95 50 -80T69 -58T89 -48T106 -45Q150 -45 150 -87Q150 -107 138 -122T115 -142T102 -147L99 -148Q101 -153 118 -160T152 -167H160Q177 -167 186 -165Q219 -156 247 -127T290 -65T313 -9T321 21L315 17Q309 13 296 6T270 -6Q250 -11 231 -11Q185 -11 150 11T104 82Q103 89 103 113Q103 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mo" transform="translate(0,374)"><path data-c="2013" d="M0 248V285H499V248H0Z"></path></g></g></g></g></svg></mjx-container></span>，同理可用~和&amp;表示按位或非。</p>
<p>参考代码：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">bitNand</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> y)</span> {</span><br><span class="line">    <span class="keyword">return</span> (~x)|(~y);</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<h2 id="p3">P3</h2>
<blockquote>
<p>ezOverflow - determine if the addition of two signed positive numbers overflows, and return 1 if overflowing happens and 0 otherwise You can assume 0 &lt;= x, 0 &lt;= y Legal ops: ! ~ &amp; ^ | + &lt;&lt; &gt;&gt; Max ops: 6 Rating: 2</p>
</blockquote>
<p>两个32位正整数相加，发生溢出返回1，没有溢出返回0。 回忆第一周的课，我们一起从零开始设计了计算机中如何用二进制表示数字。这种设计保证了两数相加，就算结果上溢出了，在执行加法运算的时候也不需要进行额外操作。 来看本题，如果把32位正整数的符号位一定是0，所以是两个31位的二进制数相加。我们的设计保证了就算符号位改变，如果你把它看成一个无符号数，答案就是正确的。我们只能用31位表示两个正整数相加得到的正整数，所以如果第32位不为0，说明计算的结果溢出了。我们只要移位，把第32位移到第1位，其余置零即可。 <code>int</code>类型的右移都是算术右移，若符号位为0，右移补0；若符号位为1，右移补1。这是为了保证“右移”操作后依然有意义。 如我们把4，二进制下的<code>100</code>右移一位，得到的是2，这和除以2是等价的。把-4算术右移一位，<code>11111111 11111111 11111111 11111100</code>变为<code>11111111 11111111 11111111 11111110</code>，得到-2，结果依然是除以2的结果。如果我们用逻辑右移，得到的是正数2147483646，意义不大。</p>
<blockquote>
<p>3右移一位的结果是什么？ -3右移一位的结果是什么？ 尝试解释右移一位和除以2的关系。</p>
</blockquote>
<p>所以题目中两数相加如果溢出，第32位为1，右移31位后前面会全部补1，我们可以用连续两次逻辑取反<code>!!</code>或者用<code>&amp;1</code>取出第一位。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">ezOverflow</span><span class="params">(<span class="type">int</span> x,<span class="type">int</span> y)</span> {</span><br><span class="line">    <span class="keyword">return</span> ((x+y)&gt;&gt;<span class="number">31</span>)&amp;<span class="number">1</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<h2 id="p4">P4</h2>
<blockquote>
<p>fastModulo - return x%(2^y) You can assume 0 &lt;= x, 1 &lt;= y &lt;= 31 Example: fastModulo(0x1234567,0xA) = 0x167 Legal ops: ! ~ &amp; ^ | + &lt;&lt; &gt;&gt; Max ops: 4 Rating: 3</p>
</blockquote>
<p>输出<code>x</code>除以2的<code>y</code>次方得到的余数。 先看<span class="math inline"><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: 0;" xmlns="http://www.w3.org/2000/svg" width="2.103ex" height="1.528ex" role="img" focusable="false" viewBox="0 -675.5 929.5 675.5"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msup"><g data-mml-node="mn"><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path></g><g data-mml-node="mi" transform="translate(533,363) scale(0.707)"><path data-c="1D466" d="M21 287Q21 301 36 335T84 406T158 442Q199 442 224 419T250 355Q248 336 247 334Q247 331 231 288T198 191T182 105Q182 62 196 45T238 27Q261 27 281 38T312 61T339 94Q339 95 344 114T358 173T377 247Q415 397 419 404Q432 431 462 431Q475 431 483 424T494 412T496 403Q496 390 447 193T391 -23Q363 -106 294 -155T156 -205Q111 -205 77 -183T43 -117Q43 -95 50 -80T69 -58T89 -48T106 -45Q150 -45 150 -87Q150 -107 138 -122T115 -142T102 -147L99 -148Q101 -153 118 -160T152 -167H160Q177 -167 186 -165Q219 -156 247 -127T290 -65T313 -9T321 21L315 17Q309 13 296 6T270 -6Q250 -11 231 -11Q185 -11 150 11T104 82Q103 89 103 113Q103 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Z"></path></g></g></g></g></svg></mjx-container></span>这一部分，2的幂的二进制表示一定是1后面若干个0。模10...0相当于取出原数最后的若干位，这很容易证明——把模数与原数对齐，截取出原数中从1对应位置开始的更高位，后面补0，得到的数是这个10...0的倍数，模的结果为0，所以答案就是所有模数中的0在原数中对应的位。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">fastModulo</span><span class="params">(<span class="type">int</span> x,<span class="type">int</span> y)</span> {</span><br><span class="line">    <span class="keyword">return</span> x&amp;~((~<span class="number">0</span>&lt;&lt;y));</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<h2 id="p5">P5</h2>
<blockquote>
<p>findDifference - return a mask that marks the diffrent bits of y compared to x Example: findDifference(12, 10) = findDifference(10, 12) = 6 Legal ops: ~ &amp; | Max ops: 9 Rating: 3</p>
</blockquote>
<p>构造一个数，若<code>x</code>和<code>y</code>中某个位的值不一样，则构造数这一位为1，否则这一位为0。 实际上和异或运算的含义是相同的。但是题目不允许我们使用按位异或运算，我们需要用与或非表示异或：对于每一位，返回<code>x==1</code>且<code>y==0</code>，或<code>x==0</code>且<code>y==1</code>。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">findDifference</span><span class="params">(<span class="type">int</span> x,<span class="type">int</span> y)</span> {</span><br><span class="line">    <span class="keyword">return</span> (x&amp;~y)|(~x&amp;y);</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<h2 id="p6">P6</h2>
<blockquote>
<p>absVal - return the absolute value of x Examples: absVal(-10) = 10,absVal(5) = 5 Legal ops: ! ~ &amp; ^ | + &lt;&lt; &gt;&gt; Max ops: 6 Rating: 4</p>
</blockquote>
<p>返回<code>x</code>的绝对值。 取相反数操作相当于取反加一。我们需要只用位运算达到“正数不变，负数取反加一”的效果，为了避免使用到<code>if</code>语句，主要思想就是让取反和加的操作数通过符号位变出来，正数不取反并加0，负数取反并加1，而其中是否取反相当于是否让每一位都异或1，加1操作相当于加上符号位对应的值。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">absVal</span><span class="params">(<span class="type">int</span> x)</span> {</span><br><span class="line">    <span class="type">int</span> minus = x &gt;&gt; <span class="number">31</span>;</span><br><span class="line">    <span class="keyword">return</span> (x ^ minus) + (minus &amp; <span class="number">1</span>);</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<h2 id="p7">P7</h2>
<blockquote>
<p>secondLowBit - return a mask that marks the position of the second least significant 1 bit. Examples: secondLowBit(0x00000110) = 0x00000100, secondLowBit(0xFEDC1A80) = 0x00000200, secondLowBit(0) = 0 Legal ops: ! ~ &amp; ^ | + &lt;&lt; &gt;&gt; Max ops: 8 Rating: 4</p>
</blockquote>
<p>对于给定的数，保留从低向高数第二个值为1的位，其它位全部赋值为0。 如果对于一个数进行取反操作，那么它的每一位都和原数不同。把取反后的数加上1，那么这个数的后导1（从最低位开始的所有连续1）将会连续进位，直到遇到第一个0。<span class="math display"><mjx-container class="MathJax" jax="SVG" display="true"><svg style="vertical-align: -0.186ex;" xmlns="http://www.w3.org/2000/svg" width="26.63ex" height="2.448ex" role="img" focusable="false" viewBox="0 -1000 11770.7 1082"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mover"><g data-mml-node="mrow"><g data-mml-node="mi"><path data-c="1D44B" d="M42 0H40Q26 0 26 11Q26 15 29 27Q33 41 36 43T55 46Q141 49 190 98Q200 108 306 224T411 342Q302 620 297 625Q288 636 234 637H206Q200 643 200 645T202 664Q206 677 212 683H226Q260 681 347 681Q380 681 408 681T453 682T473 682Q490 682 490 671Q490 670 488 658Q484 643 481 640T465 637Q434 634 411 620L488 426L541 485Q646 598 646 610Q646 628 622 635Q617 635 609 637Q594 637 594 648Q594 650 596 664Q600 677 606 683H618Q619 683 643 683T697 681T738 680Q828 680 837 683H845Q852 676 852 672Q850 647 840 637H824Q790 636 763 628T722 611T698 593L687 584Q687 585 592 480L505 384Q505 383 536 304T601 142T638 56Q648 47 699 46Q734 46 734 37Q734 35 732 23Q728 7 725 4T711 1Q708 1 678 1T589 2Q528 2 496 2T461 1Q444 1 444 10Q444 11 446 25Q448 35 450 39T455 44T464 46T480 47T506 54Q523 62 523 64Q522 64 476 181L429 299Q241 95 236 84Q232 76 232 72Q232 53 261 47Q262 47 267 47T273 46Q276 46 277 46T280 45T283 42T284 35Q284 26 282 19Q279 6 276 4T261 1Q258 1 243 1T201 2T142 2Q64 2 42 0Z"></path></g><g data-mml-node="mn" transform="translate(852,0)"><path data-c="30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z"></path><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z" transform="translate(500,0)"></path><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z" transform="translate(1000,0)"></path></g><g data-mml-node="mo" transform="translate(2518.7,0)"><path data-c="22EF" d="M78 250Q78 274 95 292T138 310Q162 310 180 294T199 251Q199 226 182 208T139 190T96 207T78 250ZM525 250Q525 274 542 292T585 310Q609 310 627 294T646 251Q646 226 629 208T586 190T543 207T525 250ZM972 250Q972 274 989 292T1032 310Q1056 310 1074 294T1093 251Q1093 226 1076 208T1033 190T990 207T972 250Z"></path></g><g data-mml-node="mn" transform="translate(3857.3,0)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path></g></g><g data-mml-node="mo" transform="translate(0,615)"><svg width="4357.3" height="237" x="0" y="148" viewBox="1089.3 148 4357.3 237"><path data-c="2013" d="M0 248V285H499V248H0Z" transform="scale(13.072,1)"></path></svg></g></g><g data-mml-node="mo" transform="translate(4579.6,0)"><path data-c="2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"></path></g><g data-mml-node="mn" transform="translate(5579.8,0)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path></g><g data-mml-node="mo" transform="translate(6357.6,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path></g><g data-mml-node="mover" transform="translate(7413.3,0)"><g data-mml-node="mrow"><g data-mml-node="mi"><path data-c="1D44B" d="M42 0H40Q26 0 26 11Q26 15 29 27Q33 41 36 43T55 46Q141 49 190 98Q200 108 306 224T411 342Q302 620 297 625Q288 636 234 637H206Q200 643 200 645T202 664Q206 677 212 683H226Q260 681 347 681Q380 681 408 681T453 682T473 682Q490 682 490 671Q490 670 488 658Q484 643 481 640T465 637Q434 634 411 620L488 426L541 485Q646 598 646 610Q646 628 622 635Q617 635 609 637Q594 637 594 648Q594 650 596 664Q600 677 606 683H618Q619 683 643 683T697 681T738 680Q828 680 837 683H845Q852 676 852 672Q850 647 840 637H824Q790 636 763 628T722 611T698 593L687 584Q687 585 592 480L505 384Q505 383 536 304T601 142T638 56Q648 47 699 46Q734 46 734 37Q734 35 732 23Q728 7 725 4T711 1Q708 1 678 1T589 2Q528 2 496 2T461 1Q444 1 444 10Q444 11 446 25Q448 35 450 39T455 44T464 46T480 47T506 54Q523 62 523 64Q522 64 476 181L429 299Q241 95 236 84Q232 76 232 72Q232 53 261 47Q262 47 267 47T273 46Q276 46 277 46T280 45T283 42T284 35Q284 26 282 19Q279 6 276 4T261 1Q258 1 243 1T201 2T142 2Q64 2 42 0Z"></path></g><g data-mml-node="mn" transform="translate(852,0)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path><path data-c="30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z" transform="translate(500,0)"></path><path data-c="30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z" transform="translate(1000,0)"></path></g><g data-mml-node="mo" transform="translate(2518.7,0)"><path data-c="22EF" d="M78 250Q78 274 95 292T138 310Q162 310 180 294T199 251Q199 226 182 208T139 190T96 207T78 250ZM525 250Q525 274 542 292T585 310Q609 310 627 294T646 251Q646 226 629 208T586 190T543 207T525 250ZM972 250Q972 274 989 292T1032 310Q1056 310 1074 294T1093 251Q1093 226 1076 208T1033 190T990 207T972 250Z"></path></g><g data-mml-node="mn" transform="translate(3857.3,0)"><path data-c="30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z"></path></g></g><g data-mml-node="mo" transform="translate(0,615)"><svg width="4357.3" height="237" x="0" y="148" viewBox="1089.3 148 4357.3 237"><path data-c="2013" d="M0 248V285H499V248H0Z" transform="scale(13.072,1)"></path></svg></g></g></g></g></svg></mjx-container></span>这相当于又把最后若干位再次取反了。那么我们最后得到的这个数的<span class="math inline"><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: 0;" xmlns="http://www.w3.org/2000/svg" width="1.928ex" height="1.545ex" role="img" focusable="false" viewBox="0 -683 852 683"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D44B" d="M42 0H40Q26 0 26 11Q26 15 29 27Q33 41 36 43T55 46Q141 49 190 98Q200 108 306 224T411 342Q302 620 297 625Q288 636 234 637H206Q200 643 200 645T202 664Q206 677 212 683H226Q260 681 347 681Q380 681 408 681T453 682T473 682Q490 682 490 671Q490 670 488 658Q484 643 481 640T465 637Q434 634 411 620L488 426L541 485Q646 598 646 610Q646 628 622 635Q617 635 609 637Q594 637 594 648Q594 650 596 664Q600 677 606 683H618Q619 683 643 683T697 681T738 680Q828 680 837 683H845Q852 676 852 672Q850 647 840 637H824Q790 636 763 628T722 611T698 593L687 584Q687 585 592 480L505 384Q505 383 536 304T601 142T638 56Q648 47 699 46Q734 46 734 37Q734 35 732 23Q728 7 725 4T711 1Q708 1 678 1T589 2Q528 2 496 2T461 1Q444 1 444 10Q444 11 446 25Q448 35 450 39T455 44T464 46T480 47T506 54Q523 62 523 64Q522 64 476 181L429 299Q241 95 236 84Q232 76 232 72Q232 53 261 47Q262 47 267 47T273 46Q276 46 277 46T280 45T283 42T284 35Q284 26 282 19Q279 6 276 4T261 1Q258 1 243 1T201 2T142 2Q64 2 42 0Z"></path></g></g></g></svg></mjx-container></span>部分与原数每一位都不同，而<span class="math inline"><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.05ex;" xmlns="http://www.w3.org/2000/svg" width="7.931ex" height="1.557ex" role="img" focusable="false" viewBox="0 -666 3505.3 688"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mn"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path><path data-c="30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z" transform="translate(500,0)"></path><path data-c="30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z" transform="translate(1000,0)"></path></g><g data-mml-node="mo" transform="translate(1666.7,0)"><path data-c="22EF" d="M78 250Q78 274 95 292T138 310Q162 310 180 294T199 251Q199 226 182 208T139 190T96 207T78 250ZM525 250Q525 274 542 292T585 310Q609 310 627 294T646 251Q646 226 629 208T586 190T543 207T525 250ZM972 250Q972 274 989 292T1032 310Q1056 310 1074 294T1093 251Q1093 226 1076 208T1033 190T990 207T972 250Z"></path></g><g data-mml-node="mn" transform="translate(3005.3,0)"><path data-c="30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z"></path></g></g></g></svg></mjx-container></span>这一部分与原数都相同。我们把这个新数与原数进行按位与，就相当于只保留了最低的一个1。 我们把这个结果对原数进行异或操作，现在原数第二低的一个1变成了最低的一个。再进行一次上述操作即可。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">secondLowBit</span><span class="params">(<span class="type">int</span> x)</span> {</span><br><span class="line">    <span class="type">int</span> y = x^(x&amp;(~x+<span class="number">1</span>));</span><br><span class="line">    <span class="keyword">return</span> y&amp;(~y+<span class="number">1</span>);</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<h2 id="p8">P8</h2>
<blockquote>
<p>byteSwap - swaps the nth byte and the mth byte Examples: byteSwap(0x12345678, 1, 3) = 0x56341278, byteSwap(0xDEADBEEF, 0, 2) = 0xDEEFBEAD You may assume that 0 &lt;= n &lt;= 3, 0 &lt;= m &lt;= 3 Legal ops: ! ~ &amp; ^ | + &lt;&lt; &gt;&gt; Max ops: 20 Rating: 5</p>
</blockquote>
<p>交换32位数中的第<code>m</code>和第<code>n</code>个字节（从0开始计数）。 我们用一个掩码<code>0xFF</code>屏蔽掉所有我们不关心的字节，得到第<code>n</code>和第<code>m</code>个字节，以及第<code>n</code>和第<code>m</code>个字节被赋值为0之后的数。把第<code>n</code>字节右移<code>n</code>个字节再左移<code>m</code>个字节，把第<code>m</code>字节右移<code>m</code>个字节再左移<code>n</code>个字节，再用与运算把这两个字节填进去即可。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">byteSwap</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> n, <span class="type">int</span> m)</span> {</span><br><span class="line">    <span class="type">int</span> expandn = n &lt;&lt; <span class="number">3</span>;</span><br><span class="line">    <span class="type">int</span> expandm = m &lt;&lt; <span class="number">3</span>;</span><br><span class="line">    <span class="type">int</span> fill = <span class="number">0xFF</span>;</span><br><span class="line">    <span class="type">int</span> maskN = fill &lt;&lt; expandn;</span><br><span class="line">    <span class="type">int</span> maskM = fill &lt;&lt; expandm;</span><br><span class="line">    <span class="type">int</span> valN = x &amp; maskN;</span><br><span class="line">    <span class="type">int</span> valM = x &amp; maskM;</span><br><span class="line">    <span class="type">int</span> clear = x &amp; (~maskN) &amp; (~maskM);</span><br><span class="line">    <span class="keyword">return</span> clear | ((valN &gt;&gt; expandn &amp; fill) &lt;&lt; expandm) | ((valM &gt;&gt; expandm &amp; fill) &lt;&lt; expandn);</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<h2 id="p9">P9</h2>
<blockquote>
<p>byteCheck - Returns the number of bytes that are not equal to 0 Examples: byteCheck(0xFE0A4100) = 3 Legal ops: ! ~ &amp; ^ | + &lt;&lt; &gt;&gt; Max ops: 24 Rating: 5</p>
</blockquote>
<p>返回4个字节中不为0的字节个数。 先创建一个字节的掩码<code>byte = 0xFF</code>，用于屏蔽掉另外的三个字节。如果<code>x &amp; byte</code>的结果不为0，则答案+1，这可以用两次逻辑取反得到。对四个字节依次操作即可。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">byteCheck</span><span class="params">(<span class="type">int</span> x)</span> {</span><br><span class="line">    <span class="type">int</span> ans = <span class="number">0</span>;</span><br><span class="line">    <span class="type">int</span> byte = <span class="number">0xFF</span>;</span><br><span class="line">    ans = ans + !!(x &amp; byte);</span><br><span class="line">    byte = byte &lt;&lt; <span class="number">8</span>;</span><br><span class="line">    ans = ans + !!(x &amp; byte);</span><br><span class="line">    byte = byte &lt;&lt; <span class="number">8</span>;</span><br><span class="line">    ans = ans + !!(x &amp; byte);</span><br><span class="line">    byte = byte &lt;&lt; <span class="number">8</span>;</span><br><span class="line">    ans = ans + !!(x &amp; byte);</span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<h2 id="p10">P10</h2>
<blockquote>
<p>fractions - return floor(x*7/16), for 0 &lt;= x, x is an integer Example: fractions(20) = 8 Legal ops: ! ~ &amp; ^ | + &lt;&lt; &gt;&gt; Max ops: 8 Rating: 5</p>
</blockquote>
<p>返回一个正数*7/16的结果。 我们在国庆节前的习题课讲过位运算和乘除法的关系（<a href="https://cjinfdu.github.io/ics/Assignment1/" class="uri">https://cjinfdu.github.io/ics/Assignment1/</a>，2.77），<code>x*7</code>可以拆成<code>x*(4+2+1)</code>，改写成位运算就是<code>(x&lt;&lt;2)+(x&lt;&lt;1)+x</code>，请注意加法的优先级高于左移。<code>x/16</code>也可以改写成<code>x&gt;&gt;4</code>。</p>
<blockquote>
<p>结合P3的思考题和第6题的分析，如果此题没有x非负的限制，应该怎么做？</p>
</blockquote>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">fractions</span><span class="params">(<span class="type">int</span> x)</span> {</span><br><span class="line">    <span class="keyword">return</span> ((x&lt;&lt;<span class="number">2</span>)+(x&lt;&lt;<span class="number">1</span>)+x)&gt;&gt;<span class="number">4</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<h2 id="p11">P11</h2>
<blockquote>
<p>biggerOrEqual - if x &gt;= y then return 1, else return 0 Example: biggerOrEqual(4,5) = 0. Legal ops: ! ~ &amp; ^ | + &lt;&lt; &gt;&gt; Max ops: 24 Rating: 6</p>
</blockquote>
<p>若<span class="math inline"><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.464ex;" xmlns="http://www.w3.org/2000/svg" width="5.42ex" height="1.903ex" role="img" focusable="false" viewBox="0 -636 2395.6 841"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D465" d="M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z"></path></g><g data-mml-node="mo" transform="translate(849.8,0)"><path data-c="2265" d="M83 616Q83 624 89 630T99 636Q107 636 253 568T543 431T687 361Q694 356 694 346T687 331Q685 329 395 192L107 56H101Q83 58 83 76Q83 77 83 79Q82 86 98 95Q117 105 248 167Q326 204 378 228L626 346L360 472Q291 505 200 548Q112 589 98 597T83 616ZM84 -118Q84 -108 99 -98H678Q694 -104 694 -118Q694 -130 679 -138H98Q84 -131 84 -118Z"></path></g><g data-mml-node="mi" transform="translate(1905.6,0)"><path data-c="1D466" d="M21 287Q21 301 36 335T84 406T158 442Q199 442 224 419T250 355Q248 336 247 334Q247 331 231 288T198 191T182 105Q182 62 196 45T238 27Q261 27 281 38T312 61T339 94Q339 95 344 114T358 173T377 247Q415 397 419 404Q432 431 462 431Q475 431 483 424T494 412T496 403Q496 390 447 193T391 -23Q363 -106 294 -155T156 -205Q111 -205 77 -183T43 -117Q43 -95 50 -80T69 -58T89 -48T106 -45Q150 -45 150 -87Q150 -107 138 -122T115 -142T102 -147L99 -148Q101 -153 118 -160T152 -167H160Q177 -167 186 -165Q219 -156 247 -127T290 -65T313 -9T321 21L315 17Q309 13 296 6T270 -6Q250 -11 231 -11Q185 -11 150 11T104 82Q103 89 103 113Q103 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Z"></path></g></g></g></svg></mjx-container></span>则返回1，否则返回0。 如果两数符号位不同，很显然符号位为1的数更小。 如果两数的符号位相同怎么办？我们知道<span class="math inline"><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.464ex;" xmlns="http://www.w3.org/2000/svg" width="5.42ex" height="1.903ex" role="img" focusable="false" viewBox="0 -636 2395.6 841"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D465" d="M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z"></path></g><g data-mml-node="mo" transform="translate(849.8,0)"><path data-c="2265" d="M83 616Q83 624 89 630T99 636Q107 636 253 568T543 431T687 361Q694 356 694 346T687 331Q685 329 395 192L107 56H101Q83 58 83 76Q83 77 83 79Q82 86 98 95Q117 105 248 167Q326 204 378 228L626 346L360 472Q291 505 200 548Q112 589 98 597T83 616ZM84 -118Q84 -108 99 -98H678Q694 -104 694 -118Q694 -130 679 -138H98Q84 -131 84 -118Z"></path></g><g data-mml-node="mi" transform="translate(1905.6,0)"><path data-c="1D466" d="M21 287Q21 301 36 335T84 406T158 442Q199 442 224 419T250 355Q248 336 247 334Q247 331 231 288T198 191T182 105Q182 62 196 45T238 27Q261 27 281 38T312 61T339 94Q339 95 344 114T358 173T377 247Q415 397 419 404Q432 431 462 431Q475 431 483 424T494 412T496 403Q496 390 447 193T391 -23Q363 -106 294 -155T156 -205Q111 -205 77 -183T43 -117Q43 -95 50 -80T69 -58T89 -48T106 -45Q150 -45 150 -87Q150 -107 138 -122T115 -142T102 -147L99 -148Q101 -153 118 -160T152 -167H160Q177 -167 186 -165Q219 -156 247 -127T290 -65T313 -9T321 21L315 17Q309 13 296 6T270 -6Q250 -11 231 -11Q185 -11 150 11T104 82Q103 89 103 113Q103 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Z"></path></g></g></g></svg></mjx-container></span>等价于<span class="math inline"><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.464ex;" xmlns="http://www.w3.org/2000/svg" width="9.317ex" height="1.971ex" role="img" focusable="false" viewBox="0 -666 4118 871"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D465" d="M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z"></path></g><g data-mml-node="mo" transform="translate(794.2,0)"><path data-c="2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"></path></g><g data-mml-node="mi" transform="translate(1794.4,0)"><path data-c="1D466" d="M21 287Q21 301 36 335T84 406T158 442Q199 442 224 419T250 355Q248 336 247 334Q247 331 231 288T198 191T182 105Q182 62 196 45T238 27Q261 27 281 38T312 61T339 94Q339 95 344 114T358 173T377 247Q415 397 419 404Q432 431 462 431Q475 431 483 424T494 412T496 403Q496 390 447 193T391 -23Q363 -106 294 -155T156 -205Q111 -205 77 -183T43 -117Q43 -95 50 -80T69 -58T89 -48T106 -45Q150 -45 150 -87Q150 -107 138 -122T115 -142T102 -147L99 -148Q101 -153 118 -160T152 -167H160Q177 -167 186 -165Q219 -156 247 -127T290 -65T313 -9T321 21L315 17Q309 13 296 6T270 -6Q250 -11 231 -11Q185 -11 150 11T104 82Q103 89 103 113Q103 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mo" transform="translate(2562.2,0)"><path data-c="2265" d="M83 616Q83 624 89 630T99 636Q107 636 253 568T543 431T687 361Q694 356 694 346T687 331Q685 329 395 192L107 56H101Q83 58 83 76Q83 77 83 79Q82 86 98 95Q117 105 248 167Q326 204 378 228L626 346L360 472Q291 505 200 548Q112 589 98 597T83 616ZM84 -118Q84 -108 99 -98H678Q694 -104 694 -118Q694 -130 679 -138H98Q84 -131 84 -118Z"></path></g><g data-mml-node="mn" transform="translate(3618,0)"><path data-c="30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z"></path></g></g></g></svg></mjx-container></span>，当<span class="math inline"><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.025ex;" xmlns="http://www.w3.org/2000/svg" width="1.294ex" height="1.025ex" role="img" focusable="false" viewBox="0 -442 572 453"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D465" d="M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z"></path></g></g></g></svg></mjx-container></span>和<span class="math inline"><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.464ex;" xmlns="http://www.w3.org/2000/svg" width="1.109ex" height="1.464ex" role="img" focusable="false" viewBox="0 -442 490 647"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D466" d="M21 287Q21 301 36 335T84 406T158 442Q199 442 224 419T250 355Q248 336 247 334Q247 331 231 288T198 191T182 105Q182 62 196 45T238 27Q261 27 281 38T312 61T339 94Q339 95 344 114T358 173T377 247Q415 397 419 404Q432 431 462 431Q475 431 483 424T494 412T496 403Q496 390 447 193T391 -23Q363 -106 294 -155T156 -205Q111 -205 77 -183T43 -117Q43 -95 50 -80T69 -58T89 -48T106 -45Q150 -45 150 -87Q150 -107 138 -122T115 -142T102 -147L99 -148Q101 -153 118 -160T152 -167H160Q177 -167 186 -165Q219 -156 247 -127T290 -65T313 -9T321 21L315 17Q309 13 296 6T270 -6Q250 -11 231 -11Q185 -11 150 11T104 82Q103 89 103 113Q103 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Z"></path></g></g></g></svg></mjx-container></span>符号相同时，有<span class="math inline"><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.566ex;" xmlns="http://www.w3.org/2000/svg" width="14.361ex" height="2.262ex" role="img" focusable="false" viewBox="0 -750 6347.7 1000"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D465" d="M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z"></path></g><g data-mml-node="mo" transform="translate(794.2,0)"><path data-c="2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"></path></g><g data-mml-node="mi" transform="translate(1794.4,0)"><path data-c="1D466" d="M21 287Q21 301 36 335T84 406T158 442Q199 442 224 419T250 355Q248 336 247 334Q247 331 231 288T198 191T182 105Q182 62 196 45T238 27Q261 27 281 38T312 61T339 94Q339 95 344 114T358 173T377 247Q415 397 419 404Q432 431 462 431Q475 431 483 424T494 412T496 403Q496 390 447 193T391 -23Q363 -106 294 -155T156 -205Q111 -205 77 -183T43 -117Q43 -95 50 -80T69 -58T89 -48T106 -45Q150 -45 150 -87Q150 -107 138 -122T115 -142T102 -147L99 -148Q101 -153 118 -160T152 -167H160Q177 -167 186 -165Q219 -156 247 -127T290 -65T313 -9T321 21L315 17Q309 13 296 6T270 -6Q250 -11 231 -11Q185 -11 150 11T104 82Q103 89 103 113Q103 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mo" transform="translate(2562.2,0)"><path data-c="2208" d="M84 250Q84 372 166 450T360 539Q361 539 377 539T419 540T469 540H568Q583 532 583 520Q583 511 570 501L466 500Q355 499 329 494Q280 482 242 458T183 409T147 354T129 306T124 272V270H568Q583 262 583 250T568 230H124V228Q124 207 134 177T167 112T231 48T328 7Q355 1 466 0H570Q583 -10 583 -20Q583 -32 568 -40H471Q464 -40 446 -40T417 -41Q262 -41 172 45Q84 127 84 250Z"></path></g><g data-mml-node="mo" transform="translate(3507,0)"><path data-c="5B" d="M118 -250V750H255V710H158V-210H255V-250H118Z"></path></g><g data-mml-node="mo" transform="translate(3785,0)"><path data-c="2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"></path></g><g data-mml-node="mi" transform="translate(4563,0)"><path data-c="1D466" d="M21 287Q21 301 36 335T84 406T158 442Q199 442 224 419T250 355Q248 336 247 334Q247 331 231 288T198 191T182 105Q182 62 196 45T238 27Q261 27 281 38T312 61T339 94Q339 95 344 114T358 173T377 247Q415 397 419 404Q432 431 462 431Q475 431 483 424T494 412T496 403Q496 390 447 193T391 -23Q363 -106 294 -155T156 -205Q111 -205 77 -183T43 -117Q43 -95 50 -80T69 -58T89 -48T106 -45Q150 -45 150 -87Q150 -107 138 -122T115 -142T102 -147L99 -148Q101 -153 118 -160T152 -167H160Q177 -167 186 -165Q219 -156 247 -127T290 -65T313 -9T321 21L315 17Q309 13 296 6T270 -6Q250 -11 231 -11Q185 -11 150 11T104 82Q103 89 103 113Q103 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mo" transform="translate(5053,0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"></path></g><g data-mml-node="mi" transform="translate(5497.7,0)"><path data-c="1D465" d="M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z"></path></g><g data-mml-node="mo" transform="translate(6069.7,0)"><path data-c="5D" d="M22 710V750H159V-250H22V-210H119V710H22Z"></path></g></g></g></svg></mjx-container></span>，所以必定不会溢出。所以我们可以通过<span class="math inline"><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.464ex;" xmlns="http://www.w3.org/2000/svg" width="5.168ex" height="1.783ex" role="img" focusable="false" viewBox="0 -583 2284.4 788"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D465" d="M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z"></path></g><g data-mml-node="mo" transform="translate(794.2,0)"><path data-c="2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"></path></g><g data-mml-node="mi" transform="translate(1794.4,0)"><path data-c="1D466" d="M21 287Q21 301 36 335T84 406T158 442Q199 442 224 419T250 355Q248 336 247 334Q247 331 231 288T198 191T182 105Q182 62 196 45T238 27Q261 27 281 38T312 61T339 94Q339 95 344 114T358 173T377 247Q415 397 419 404Q432 431 462 431Q475 431 483 424T494 412T496 403Q496 390 447 193T391 -23Q363 -106 294 -155T156 -205Q111 -205 77 -183T43 -117Q43 -95 50 -80T69 -58T89 -48T106 -45Q150 -45 150 -87Q150 -107 138 -122T115 -142T102 -147L99 -148Q101 -153 118 -160T152 -167H160Q177 -167 186 -165Q219 -156 247 -127T290 -65T313 -9T321 21L315 17Q309 13 296 6T270 -6Q250 -11 231 -11Q185 -11 150 11T104 82Q103 89 103 113Q103 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Z"></path></g></g></g></svg></mjx-container></span>的符号位判断<span class="math inline"><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.464ex;" xmlns="http://www.w3.org/2000/svg" width="5.42ex" height="1.903ex" role="img" focusable="false" viewBox="0 -636 2395.6 841"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D465" d="M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z"></path></g><g data-mml-node="mo" transform="translate(849.8,0)"><path data-c="2265" d="M83 616Q83 624 89 630T99 636Q107 636 253 568T543 431T687 361Q694 356 694 346T687 331Q685 329 395 192L107 56H101Q83 58 83 76Q83 77 83 79Q82 86 98 95Q117 105 248 167Q326 204 378 228L626 346L360 472Q291 505 200 548Q112 589 98 597T83 616ZM84 -118Q84 -108 99 -98H678Q694 -104 694 -118Q694 -130 679 -138H98Q84 -131 84 -118Z"></path></g><g data-mml-node="mi" transform="translate(1905.6,0)"><path data-c="1D466" d="M21 287Q21 301 36 335T84 406T158 442Q199 442 224 419T250 355Q248 336 247 334Q247 331 231 288T198 191T182 105Q182 62 196 45T238 27Q261 27 281 38T312 61T339 94Q339 95 344 114T358 173T377 247Q415 397 419 404Q432 431 462 431Q475 431 483 424T494 412T496 403Q496 390 447 193T391 -23Q363 -106 294 -155T156 -205Q111 -205 77 -183T43 -117Q43 -95 50 -80T69 -58T89 -48T106 -45Q150 -45 150 -87Q150 -107 138 -122T115 -142T102 -147L99 -148Q101 -153 118 -160T152 -167H160Q177 -167 186 -165Q219 -156 247 -127T290 -65T313 -9T321 21L315 17Q309 13 296 6T270 -6Q250 -11 231 -11Q185 -11 150 11T104 82Q103 89 103 113Q103 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Z"></path></g></g></g></svg></mjx-container></span>是否成立。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">biggerOrEqual</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> y)</span> {</span><br><span class="line">    <span class="type">int</span> signx = (x &gt;&gt; <span class="number">31</span>) &amp; <span class="number">1</span>;</span><br><span class="line">    <span class="type">int</span> signy = (y &gt;&gt; <span class="number">31</span>) &amp; <span class="number">1</span>;</span><br><span class="line">    <span class="type">int</span> x_neg_y_pos = signx &amp; (!signy);</span><br><span class="line">    <span class="type">int</span> x_pos_y_neg = (!signx) &amp; signy;</span><br><span class="line">    <span class="type">int</span> minus = (x + (~y) + <span class="number">1</span>) &gt;&gt; <span class="number">31</span>;</span><br><span class="line">    <span class="keyword">return</span> (!x_neg_y_pos) &amp; (x_pos_y_neg | (!minus) | (!(x ^ y)));</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<h2 id="p12">P12</h2>
<blockquote>
<p>hdOverflow - determine if the addition of two signed 32-bit integers overflows, and return 1 if overflowing happens and 0 otherwise Legal ops: ! ~ &amp; ^ | + &lt;&lt; &gt;&gt; Max ops: 20 Rating: 6</p>
</blockquote>
<p>判断两个32位有符号整数相加是否溢出。 我们证明<span class="math display"><mjx-container class="MathJax" jax="SVG" display="true"><svg style="vertical-align: -0.452ex;" xmlns="http://www.w3.org/2000/svg" width="66.868ex" height="2.149ex" role="img" focusable="false" viewBox="0 -750 29555.6 950"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">两</text></g><g data-mml-node="mi" transform="translate(1000,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">数</text></g><g data-mml-node="mi" transform="translate(2000,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">相</text></g><g data-mml-node="mi" transform="translate(3000,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">加</text></g><g data-mml-node="mi" transform="translate(4000,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">溢</text></g><g data-mml-node="mi" transform="translate(5000,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">出</text></g><g data-mml-node="mo" transform="translate(6277.8,0)"><path data-c="21D4" d="M308 524Q318 526 323 526Q340 526 340 514Q340 507 336 499Q326 476 314 454T292 417T274 391T260 374L255 368Q255 367 500 367Q744 367 744 368L739 374Q734 379 726 390T707 416T685 453T663 499Q658 511 658 515Q658 525 680 525Q687 524 690 523T695 519T701 507Q766 359 902 287Q921 276 939 269T961 259T966 250Q966 246 965 244T960 240T949 236T930 228T902 213Q763 137 701 -7Q697 -16 695 -19T690 -23T680 -25Q658 -25 658 -15Q658 -11 663 1Q673 24 685 46T707 83T725 109T739 126L744 132Q744 133 500 133Q255 133 255 132L260 126Q265 121 273 110T292 84T314 47T336 1Q341 -11 341 -15Q341 -25 319 -25Q312 -24 309 -23T304 -19T298 -7Q233 141 97 213Q83 221 70 227T51 235T41 239T35 243T34 250T35 256T40 261T51 265T70 273T97 287Q235 363 299 509Q305 522 308 524ZM792 319L783 327H216Q183 294 120 256L110 250L120 244Q173 212 207 181L216 173H783L792 181Q826 212 879 244L889 250L879 256Q826 288 792 319Z"></path></g><g data-mml-node="mi" transform="translate(7555.6,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">两</text></g><g data-mml-node="mi" transform="translate(8555.6,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">数</text></g><g data-mml-node="mi" transform="translate(9555.6,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">符</text></g><g data-mml-node="mi" transform="translate(10555.6,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">号</text></g><g data-mml-node="mi" transform="translate(11555.6,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">位</text></g><g data-mml-node="mi" transform="translate(12555.6,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">相</text></g><g data-mml-node="mi" transform="translate(13555.6,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">同</text></g><g data-mml-node="mi" transform="translate(14555.6,0)"><text data-variant="italic" transform="scale(1,-1)" font-size="884px" font-family="serif" font-style="italic">，</text></g><g data-mml-node="mi" transform="translate(15555.6,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">且</text></g><g data-mml-node="mi" transform="translate(16555.6,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">两</text></g><g data-mml-node="mi" transform="translate(17555.6,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">数</text></g><g data-mml-node="mi" transform="translate(18555.6,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">之</text></g><g data-mml-node="mi" transform="translate(19555.6,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">和</text></g><g data-mml-node="mi" transform="translate(20555.6,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">的</text></g><g data-mml-node="mi" transform="translate(21555.6,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">符</text></g><g data-mml-node="mi" transform="translate(22555.6,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">号</text></g><g data-mml-node="mi" transform="translate(23555.6,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">位</text></g><g data-mml-node="mi" transform="translate(24555.6,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">与</text></g><g data-mml-node="mi" transform="translate(25555.6,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">原</text></g><g data-mml-node="mi" transform="translate(26555.6,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">数</text></g><g data-mml-node="mi" transform="translate(27555.6,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">不</text></g><g data-mml-node="mi" transform="translate(28555.6,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">同</text></g></g></g></svg></mjx-container></span>证明： 充分性：由P11可知，若两数相加溢出，它们一定同号。两个最大的32位有符号正整数相加，结果最大是<code>0x7FFF FFFF + 0x7FFF FFFF = 0xFFFF FFFE</code>，在32位的范围内。所以正数相加溢出的范围为<code>[0x8000 0000, 0xFFFF FFFE]</code>，符号位一定改变。对于负数同理。 必要性： 若两数同号，相加后肯定同号。所以符号不同时代表结果溢出了。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">hdOverflow</span><span class="params">(<span class="type">int</span> x,<span class="type">int</span> y)</span> {</span><br><span class="line">    <span class="keyword">return</span> (!((x ^ y) &gt;&gt; <span class="number">31</span>)) &amp; (((x + y) ^ x) &gt;&gt; <span class="number">31</span>) &amp; <span class="number">1</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<h2 id="p13">P13</h2>
<blockquote>
<p>overflowCalc - given binary representations of three 32-bit positive numbers and add them together, return the binary representation of the part where bits are higher than 32. Examples: overflowCalc(0xffffffff,0xffffffff,0xffffffff) = 2 Legal ops: ! ~ &amp; ^ | + &lt;&lt; &gt;&gt; Max ops: 30 Rating: 7</p>
</blockquote>
<p>给出3个32位正整数的二进制表示，求他们相加后溢出部分的值。 直接相加用<code>int</code>肯定存不下，但是我们可以拆成两段16位（或者一段2位，一段30位）分别计算，这用32位肯定是能装下的。分别加完之后，把低位那一段的进位加到高位那一段中就是结果了。 &gt;实际上这就是高精度加法的思想，python中的整数范围无限大，就要用到这个思想。把一个大整数拆成很多个可以直接表示的小段放在数组中，然后对于每一小段分别计算，最后处理进位。 想想高精度乘法应该怎么做？</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">overflowCalc</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> y, <span class="type">int</span> z)</span> {</span><br><span class="line">    <span class="type">int</span> top = (x &gt;&gt; <span class="number">30</span> &amp; <span class="number">3</span>) + (y &gt;&gt; <span class="number">30</span> &amp; <span class="number">3</span>) + (z &gt;&gt; <span class="number">30</span> &amp; <span class="number">3</span>);</span><br><span class="line">    <span class="type">int</span> mask = ~(<span class="number">3</span> &lt;&lt; <span class="number">30</span>);</span><br><span class="line">    <span class="type">int</span> bottom = (x &amp; mask) + (y &amp; mask) + (z &amp; mask);</span><br><span class="line">    <span class="type">int</span> final = top + (bottom &gt;&gt; <span class="number">30</span> &amp; <span class="number">3</span>);</span><br><span class="line">    <span class="keyword">return</span> final &gt;&gt; <span class="number">2</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<h2 id="p14">P14</h2>
<blockquote>
<p>logicalShift - shift x to the right by n, using a arithmetical shift Can assume that 0 &lt;= n &lt;= 31 Examples: logicalShift(0x87654321,4) = 0x08765432 Legal ops: ! ~ &amp; ^ | + &lt;&lt; &gt;&gt; Max ops: 20 Rating: 8</p>
</blockquote>
<p>用算术右移和其他运算实现逻辑右移。 我们实际要做的就是生成一个最高<code>n</code>位为0，其余为1的掩码，处理算术右移后的结果。我们可以用32位1左移<code>32-n</code>位，再取反来得到这个效果。特别要注意的是，在C语言标准中<code>int</code>类型左移32位是未定义行为。 &gt;C语言的标准允许在编译C语言时，假设用户代码是完全符合标准的，编译器无需进行检查。不管编译器如何把这些语句编译成汇编，都不能算他错，类似于数字逻辑中的“无关项”。这里把int左移32位就是不符合标准的，编译器想怎么做都可以。</p>
<p>我们考虑如何特殊处理<code>32-n=32</code>的情况，这里给出两种解决办法：</p>
<ol type="1">
<li>我们把左移32位当做左移0位处理，并把一个特殊变量<code>correction</code>标记为1。由于<code>correction</code>的相反数<code>-1</code>是<code>0xFFFFFFFF</code>，我们给掩码加上这个值即可；<code>correction</code>为<code>0</code>时我们加上的也是<code>0</code>，不影响结果。</li>
</ol>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">logicalShift</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> n)</span> {</span><br><span class="line">    <span class="type">int</span> empty = (<span class="number">33</span> + ~n) &amp; <span class="number">31</span>;</span><br><span class="line">    <span class="type">int</span> mask = ~(~<span class="number">0</span> &lt;&lt; empty);</span><br><span class="line">    <span class="type">int</span> correction = !n;</span><br><span class="line">    mask = mask + ((~correction) + <span class="number">1</span>);</span><br><span class="line">    <span class="keyword">return</span> x &gt;&gt; n &amp; mask;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<ol start="2" type="1">
<li>对于一个左移操作，我们先左移它的一半，再左移剩下一半。 <figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">logicalShift</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> n)</span> {</span><br><span class="line">    <span class="type">int</span> empty = (<span class="number">33</span> + ~n);</span><br><span class="line">    <span class="type">int</span> l1 = empty &gt;&gt; <span class="number">1</span>;</span><br><span class="line">    <span class="type">int</span> l2 = empty + (~l1 + <span class="number">1</span>);</span><br><span class="line">    <span class="type">int</span> mask = ~(~<span class="number">0</span> &lt;&lt; l1 &lt;&lt; l2);</span><br><span class="line">    <span class="keyword">return</span> x &gt;&gt; n &amp; mask;</span><br><span class="line">}</span><br></pre></td></tr></table></figure></li>
</ol>
<h2 id="p15">P15</h2>
<blockquote>
<p>partialFill - given l, h, fill all even digits within the interval [l, h] with 1 (subscripts starting from 0) Can assume that 0 &lt;= l &lt;= 15, 16 &lt;= h &lt;= 31 Examples: partialFill(13,16) = 0x00014000 Legal ops: ! ~ &amp; ^ | + &lt;&lt; &gt;&gt; Max ops: 24 Rating: 8</p>
</blockquote>
<p>把<code>[l,h]</code>区间内的偶数位都填充为1，下标从<code>0</code>开始计数。 我们先填充出一个所有偶数位全为1，奇数位全为0的数，然后用掩码的思想把<code>[l,h]</code>区间外的数全部屏蔽掉即可。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">partialFill</span><span class="params">(<span class="type">int</span> l, <span class="type">int</span> h)</span> {</span><br><span class="line">    <span class="type">int</span> fill = <span class="number">0x55</span>, all, lowErase, hiErase;</span><br><span class="line">    all = fill &lt;&lt; <span class="number">16</span> | fill;</span><br><span class="line">    all = all &lt;&lt; <span class="number">8</span> | all;</span><br><span class="line">    lowErase = ~<span class="number">0</span> &lt;&lt; l;</span><br><span class="line">    hiErase = ~<span class="number">0</span> + (<span class="number">1</span> &lt;&lt; h &lt;&lt; <span class="number">1</span>);</span><br><span class="line">    <span class="keyword">return</span> all &amp; lowErase &amp; hiErase;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<h2 id="p16">P16</h2>
<blockquote>
<p>float_abs - Return bit-level equivalent of expression |f| (absolute value of f) for floating point argument f. Both the argument and result are passed as unsigned int's, but they are to be interpreted as the bit-level representations of single-precision floating point values. When argument is NaN, return argument. Legal ops: Any integer/unsigned operations incl. ||, &amp;&amp;. also if, while Max ops: 20 Rating: 3</p>
</blockquote>
<p>返回一个浮点数的绝对值的二进制表示。如果是<code>NaN</code>就返回原本的数字。 判断<code>NaN</code>只需判断阶码为255，同时除开前9位外，剩下的不全为0。 计算绝对值只需要将符号位置0即可。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">unsigned</span> <span class="title function_">float_abs</span><span class="params">(<span class="type">unsigned</span> uf)</span> {</span><br><span class="line">    <span class="type">unsigned</span> expmask = <span class="number">0x7F800000</span>;</span><br><span class="line">    <span class="keyword">if</span>((uf &amp; expmask) &gt;&gt; <span class="number">23</span> == <span class="number">255</span> &amp;&amp; uf &lt;&lt; <span class="number">9</span>) <span class="keyword">return</span> uf;</span><br><span class="line">    <span class="keyword">return</span> uf &amp; <span class="number">0x7FFFFFFF</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<h2 id="p17">P17</h2>
<blockquote>
<p>float_cmp - Return 1 if uf1 &gt; uf2, and 0 otherwise. Both of the arguments are passed as unsigned int's, but they are to be interpreted as the bit-level representations of single-precision floating point values. When any of the arguments is NaN, return 0. Legal ops: Any integer/unsigned operations incl. ||, &amp;&amp;. also if, while Max ops: 40 Rating: 5</p>
</blockquote>
<p>比较两个浮点数的大小。如果任意一个是<code>NaN</code>就返回0。 首先需要注意的是，浮点数是有<code>+0</code>和<code>-0</code>的，两个这样的<code>float</code>进行比较是相等的。为了用<code>unsigned</code>表示时方便比较，可以先把<code>-0</code>全部变为<code>0</code>。 之后就普通的比较，首先比较符号位，其次比较指数部分，最后比较小数部分。只需要注意对于负数，指数和小数部分越小的数实际越大。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">unsigned</span> <span class="title function_">float_cmp</span><span class="params">(<span class="type">unsigned</span> uf1, <span class="type">unsigned</span> uf2)</span> {</span><br><span class="line">    <span class="type">unsigned</span> expmask = <span class="number">0x7F800000</span>, basemask = <span class="number">0x7FFFFF</span>, signErase = <span class="number">0x7FFFFFFF</span>;</span><br><span class="line">    <span class="type">unsigned</span> exp1 = (uf1 &amp; expmask) &gt;&gt; <span class="number">23</span>, exp2 = (uf2 &amp; expmask) &gt;&gt; <span class="number">23</span>;</span><br><span class="line">    <span class="type">unsigned</span> base1 = uf1 &amp; basemask, base2 = uf2 &amp; basemask;</span><br><span class="line">    <span class="keyword">if</span>((exp1 == <span class="number">255</span> &amp;&amp; base1) || (exp2 == <span class="number">255</span> &amp;&amp; base2)) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span>((uf1 &amp; signErase) == <span class="number">0</span>)uf1 = <span class="number">0</span>;<span class="comment">//change -0 to 0</span></span><br><span class="line">    <span class="keyword">if</span>((uf2 &amp; signErase) == <span class="number">0</span>)uf2 = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span>(!(uf1 &gt;&gt; <span class="number">31</span>)){<span class="comment">//uf1 positive</span></span><br><span class="line">        <span class="keyword">if</span>(uf2 &gt;&gt; <span class="number">31</span>)<span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span>(exp1 == exp2)<span class="keyword">return</span> base1 &gt; base2;</span><br><span class="line">        <span class="keyword">return</span> exp1 &gt; exp2;</span><br><span class="line">    }<span class="keyword">else</span> <span class="keyword">if</span>(uf2 &gt;&gt; <span class="number">31</span>){</span><br><span class="line">        <span class="keyword">if</span>(exp1 == exp2)<span class="keyword">return</span> base1 &lt; base2;</span><br><span class="line">        <span class="keyword">return</span> exp1 &lt; exp2;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<h2 id="p18">P18</h2>
<blockquote>
<p>float_pow2 - Return bit-level equivalent of expression f*(2^n) for floating point argument f and integer argument n. Both the argument and result are passed as unsigned int's, but they are to be interpreted as the bit-level representations of single-precision floating point values. When argument is NaN, return argument. You can assume 0 &lt;= n &lt;= 255 Legal ops: Any integer/unsigned operations incl. ||, &amp;&amp;. also if, while Max ops: 50 Rating: 6</p>
</blockquote>
<p>返回一个浮点数乘以2的n次方以后的值。如果浮点数是<code>NaN</code>就返回原本的浮点数。 一般情况下相当于直接把阶码加上<code>n</code>，如果阶码大于等于<code>255</code>则变成正无穷，抹去小数部分。需要考虑非规约数的特殊情况。 最小的规约数<code>1 00000001 00000000000000000000000</code>表示$2<sup>{-126} <span class="math inline"><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.452ex;" xmlns="http://www.w3.org/2000/svg" width="60.068ex" height="2.149ex" role="img" focusable="false" viewBox="0 -750 26550 950"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><text data-variant="italic" transform="scale(1,-1)" font-size="884px" font-family="serif" font-style="italic">，</text></g><g data-mml-node="mi" transform="translate(1000,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">最</text></g><g data-mml-node="mi" transform="translate(2000,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">大</text></g><g data-mml-node="mi" transform="translate(3000,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">的</text></g><g data-mml-node="mi" transform="translate(4000,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">非</text></g><g data-mml-node="mi" transform="translate(5000,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">规</text></g><g data-mml-node="mi" transform="translate(6000,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">约</text></g><g data-mml-node="mi" transform="translate(7000,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">数</text></g><g data-mml-node="mo" transform="translate(8000,0)"><path data-c="2035" d="M12 501Q12 527 31 542T63 558Q73 560 77 560Q114 560 128 528Q133 518 188 293T244 61Q244 56 223 50T195 43Q192 43 190 45T102 263T14 486Q12 496 12 501Z"></path></g><g data-mml-node="mn" transform="translate(8275,0)"><path data-c="30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z"></path></g><g data-mml-node="mn" transform="translate(8775,0)"><path data-c="30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z"></path><path data-c="30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z" transform="translate(500,0)"></path><path data-c="30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z" transform="translate(1000,0)"></path><path data-c="30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z" transform="translate(1500,0)"></path><path data-c="30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z" transform="translate(2000,0)"></path><path data-c="30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z" transform="translate(2500,0)"></path><path data-c="30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z" transform="translate(3000,0)"></path><path data-c="30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z" transform="translate(3500,0)"></path></g><g data-mml-node="mn" transform="translate(12775,0)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z" transform="translate(500,0)"></path><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z" transform="translate(1000,0)"></path><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z" transform="translate(1500,0)"></path><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z" transform="translate(2000,0)"></path><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z" transform="translate(2500,0)"></path><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z" transform="translate(3000,0)"></path><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z" transform="translate(3500,0)"></path><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z" transform="translate(4000,0)"></path><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z" transform="translate(4500,0)"></path><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z" transform="translate(5000,0)"></path><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z" transform="translate(5500,0)"></path><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z" transform="translate(6000,0)"></path><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z" transform="translate(6500,0)"></path><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z" transform="translate(7000,0)"></path><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z" transform="translate(7500,0)"></path><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z" transform="translate(8000,0)"></path><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z" transform="translate(8500,0)"></path><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z" transform="translate(9000,0)"></path><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z" transform="translate(9500,0)"></path><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z" transform="translate(10000,0)"></path><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z" transform="translate(10500,0)"></path><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z" transform="translate(11000,0)"></path></g><g data-mml-node="mo" transform="translate(24275,0)"><path data-c="2035" d="M12 501Q12 527 31 542T63 558Q73 560 77 560Q114 560 128 528Q133 518 188 293T244 61Q244 56 223 50T195 43Q192 43 190 45T102 263T14 486Q12 496 12 501Z"></path></g><g data-mml-node="mi" transform="translate(24550,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">表</text></g><g data-mml-node="mi" transform="translate(25550,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">示</text></g></g></g></svg></mjx-container></span>(1-2</sup>{-23})2^{-126}$，非规约数部分指数固定在<code>-126</code>，整数部分为<code>0</code>，需要特殊处理：非规约数首先小数部分左移，如果最高位的<code>1</code>超过了第<code>23</code>位，转为规约数继续处理。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">unsigned</span> <span class="title function_">float_pow2</span><span class="params">(<span class="type">unsigned</span> uf,<span class="type">int</span> n)</span> {</span><br><span class="line">    <span class="type">unsigned</span> expmask = <span class="number">0x7F800000</span>, basemask = <span class="number">0x7FFFFF</span>, signErase = <span class="number">0x7FFFFFFF</span>, sign, <span class="built_in">exp</span>, base;</span><br><span class="line">    <span class="keyword">if</span>((uf &amp; expmask) &gt;&gt; <span class="number">23</span> == <span class="number">255</span> &amp;&amp; uf &lt;&lt; <span class="number">9</span>) <span class="keyword">return</span> uf;</span><br><span class="line">    <span class="keyword">if</span>((uf &amp; signErase) == <span class="number">0</span>)<span class="keyword">return</span> uf;</span><br><span class="line">    sign = uf &amp; ~signErase;</span><br><span class="line">    <span class="built_in">exp</span> = (uf &amp; expmask) &gt;&gt; <span class="number">23</span>;</span><br><span class="line">    base = uf &amp; basemask;</span><br><span class="line">    <span class="keyword">if</span>(<span class="built_in">exp</span> == <span class="number">0</span>){</span><br><span class="line">        <span class="keyword">while</span>(!(base &gt;&gt; <span class="number">23</span>) &amp;&amp; n &gt; <span class="number">0</span>){</span><br><span class="line">            base &lt;&lt;= <span class="number">1</span>;</span><br><span class="line">            --n;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">if</span>(base &gt;&gt; <span class="number">23</span>){</span><br><span class="line">            base ^= <span class="number">1</span> &lt;&lt; <span class="number">23</span>;</span><br><span class="line">            ++<span class="built_in">exp</span>;</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">exp</span> += n;</span><br><span class="line">    <span class="keyword">if</span>(<span class="built_in">exp</span> &gt;= <span class="number">255</span>)<span class="keyword">return</span> sign | (<span class="number">0xFF</span> &lt;&lt; <span class="number">23</span>);</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(<span class="built_in">exp</span> == <span class="number">0</span>)<span class="keyword">return</span> sign | base;</span><br><span class="line">    <span class="keyword">return</span> sign | (<span class="built_in">exp</span> &lt;&lt; <span class="number">23</span>) | base;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<h2 id="p19">P19</h2>
<blockquote>
<p>float_i2f - Return bit-level equivalent of expression (float) x. Result is returned as unsigned int, but it is to be interpreted as the bit-level representation of a single-precision floating point values. Legal ops: Any integer/unsigned operations incl. ||, &amp;&amp;. also if, while Max ops: 40 Rating: 7</p>
</blockquote>
<p>把<code>int</code>类型的整数<code>x</code>转为<code>float</code>。 除了<code>-2147483648</code>外，其余均可以转为绝对值处理。首先处理有效位数，<code>float</code>的小数位数只有<code>23</code>位，可能需要进行舍入。这里采用的是IEEE 754规定中的默认方法：将结果舍入为最接近且可以表示的值，但是当存在两个数一样接近的时候，则取其中的偶数。 我们找到原整数的最高的一个<code>1</code>，它的代表转换后的<code>float</code>的整数部分，所以不算在<code>float</code>的小数有效位数里面，同时它的位置代表阶码的偏移量。之后取出后面紧挨着的最多<code>23</code>位，代表小数部分。若截取<code>23</code>位后，后面还有值，将其用于计算舍入。需要注意，如果舍入的结果是给小数部分<code>+1</code>，有可能产生进位，算上整数部分有可能会从<code>24</code>位变成<code>25</code>位，需要再次右移一位。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">unsigned</span> <span class="title function_">float_i2f</span><span class="params">(<span class="type">int</span> x)</span> {</span><br><span class="line">    <span class="type">int</span> valid = <span class="number">30</span>, sign;</span><br><span class="line">    <span class="type">int</span> frac, shift, plus = <span class="number">0</span>, cut, rounding, check, first, carry;</span><br><span class="line">    <span class="keyword">if</span> (!x)<span class="keyword">return</span> x;</span><br><span class="line">    <span class="keyword">if</span> (x == <span class="number">-2147483648</span>)<span class="keyword">return</span> <span class="number">0xCF000000</span>;</span><br><span class="line">    <span class="keyword">if</span> (x &lt; <span class="number">0</span>) {</span><br><span class="line">        x = -x;</span><br><span class="line">        sign = <span class="number">1</span>;</span><br><span class="line">    } <span class="keyword">else</span> sign = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (!(x &gt;&gt; valid))--valid;</span><br><span class="line">    <span class="comment">//valid: Number of significant digits after omitting 1 in the integer part</span></span><br><span class="line">    <span class="keyword">if</span> (valid &gt; <span class="number">23</span>) {</span><br><span class="line">        shift = valid - <span class="number">23</span>;</span><br><span class="line">        frac = x &gt;&gt; shift;</span><br><span class="line">        </span><br><span class="line">        rounding = x &amp; ((<span class="number">1</span> &lt;&lt; shift) - <span class="number">1</span>);</span><br><span class="line">        check = shift - <span class="number">1</span>;</span><br><span class="line">        first = rounding &gt;&gt; check;<span class="comment">//the first bit to be dismiss</span></span><br><span class="line">        <span class="keyword">if</span> (first) {</span><br><span class="line">            <span class="keyword">if</span> ((first &lt;&lt; check) == rounding) {</span><br><span class="line">                plus = frac &amp; <span class="number">1</span>;</span><br><span class="line">            } <span class="keyword">else</span> plus = <span class="number">1</span>;</span><br><span class="line">        }</span><br><span class="line">        </span><br><span class="line">        frac += plus;</span><br><span class="line">        carry = frac &gt;&gt; <span class="number">24</span>;</span><br><span class="line">        valid += carry;</span><br><span class="line">        frac &gt;&gt;= carry;</span><br><span class="line">    } <span class="keyword">else</span> frac = x &lt;&lt; (<span class="number">23</span> - valid);</span><br><span class="line">    <span class="keyword">return</span> (sign &lt;&lt; <span class="number">31</span>) | (((<span class="number">127</span> + valid) &lt;&lt; <span class="number">23</span>)) | (frac &amp; <span class="number">0x7FFFFF</span>);</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<h2 id="p20">P20</h2>
<blockquote>
<p>oddParity - return the odd parity bit of x, that is, when the number of 1s in the binary representation of x is even, then the return 1, otherwise return 0. Examples:oddParity(5) = 1, oddParity(7) = 0 Legal ops: ! ~ &amp; ^ | + &lt;&lt; &gt;&gt; Max ops: 56 Challenge: You will get 1 extra point if you use less than or equal to 34 ops Rating: 2</p>
</blockquote>
<p>当<code>x</code>有偶数个<code>1</code>时，返回<code>1</code>，否则返回<code>0</code>。</p>
<p>方法一：计算出所有<code>1</code>的个数 我们考虑首先构造出每相邻两位都不相同的数<code>0x55555555</code>和<code>0xAAAAAAAA</code>用作掩码，对原数进行按位与，就得到了两个数，代表所有奇数位和所有偶数位。我们也可以换一个角度看得到的这两个数，将其解释为每一个奇数位/偶数位上有几个<code>1</code>（0个或1个）。我们把用掩码<code>0xAAAAAAAA</code>得到的数右移一位，加到用掩码<code>0x55555555</code>得到的数上，新的结果可以解释为每两位上有几个<code>1</code>（00个，01个，10个）。 对于这个新结果，我们又分别用掩码<code>0x33333333</code>和<code>0xCCCCCCCC</code>进行按位与，同理，把掩码<code>0xCCCCCCCC</code>得到的数右移两位，加到掩码<code>0x33333333</code>得到的数上，新的结果可以解释为每4位上有几个<code>1</code>（0000~0100个）。以此类推，最后可以统计出一共出现了多少个<code>1</code>，看结果的奇偶即可。 我们考虑如何优化操作符个数。如果构造掩码时，对于每个字节分别赋值，显然是最直观的方法，但是有改进空间。 我们假设掩码是64位的，以此突出给每一个字节逐个赋值的方法的缺点。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mask = <span class="number">0x55</span> | (<span class="number">0x55</span> &lt;&lt; <span class="number">8</span>) | (<span class="number">0x55</span> &lt;&lt; <span class="number">16</span>) | (<span class="number">0x55</span> &lt;&lt; <span class="number">24</span>) | (<span class="number">0x55</span> &lt;&lt; <span class="number">32</span>) | (<span class="number">0x55</span> &lt;&lt; <span class="number">40</span>) | (<span class="number">0x55</span> &lt;&lt; <span class="number">48</span>) | (<span class="number">0x55</span> &lt;&lt; <span class="number">56</span>)</span><br></pre></td></tr></table></figure>
<p>上面的代码用了14个操作符。</p>
<p>考虑到掩码的每个字节都是相同的，如果我们首先赋值一个字节，然后把它复制一份变成两个字节，再把这两个字节复制一份变成四个字节，再把复制一次就变成八个字节，就减少了赋值的次数。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//(1)</span></span><br><span class="line">mask = <span class="number">0x55</span> | (<span class="number">0x55</span> &lt;&lt; <span class="number">8</span>);</span><br><span class="line">mask = mask | (mask &lt;&lt; <span class="number">16</span>);</span><br><span class="line">mask = mask | (mask &lt;&lt; <span class="number">32</span>);</span><br><span class="line"><span class="comment">//(2)</span></span><br><span class="line">mask = <span class="number">0x55</span>;</span><br><span class="line">mask = mask | (mask &lt;&lt; <span class="number">32</span>);</span><br><span class="line">mask = mask | (mask &lt;&lt; <span class="number">16</span>);</span><br><span class="line">mask = mask | (mask &lt;&lt; <span class="number">8</span>);</span><br></pre></td></tr></table></figure>
<p>上面两种方法的效果是一样的，而且都只用了6个操作符。</p>
<p>方法(1)的思想是，每次基于已有的内容扩展一倍，扩展<span class="math inline"><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.025ex;" xmlns="http://www.w3.org/2000/svg" width="1.357ex" height="1.025ex" role="img" focusable="false" viewBox="0 -442 600 453"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D45B" d="M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z"></path></g></g></g></svg></mjx-container></span>次长度就变成<span class="math inline"><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: 0;" xmlns="http://www.w3.org/2000/svg" width="2.279ex" height="1.528ex" role="img" focusable="false" viewBox="0 -675.5 1007.3 675.5"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msup"><g data-mml-node="mn"><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path></g><g data-mml-node="mi" transform="translate(533,363) scale(0.707)"><path data-c="1D45B" d="M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z"></path></g></g></g></g></svg></mjx-container></span>。我们都知道指数函数增长很快，要赋值<span class="math inline"><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.025ex;" xmlns="http://www.w3.org/2000/svg" width="1.357ex" height="1.025ex" role="img" focusable="false" viewBox="0 -442 600 453"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D45B" d="M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z"></path></g></g></g></svg></mjx-container></span>个字节只需要<span class="math inline"><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.546ex;" xmlns="http://www.w3.org/2000/svg" width="5.614ex" height="2.116ex" role="img" focusable="false" viewBox="0 -694 2481.2 935.4"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msub"><g data-mml-node="mi"><path data-c="6C" d="M42 46H56Q95 46 103 60V68Q103 77 103 91T103 124T104 167T104 217T104 272T104 329Q104 366 104 407T104 482T104 542T103 586T103 603Q100 622 89 628T44 637H26V660Q26 683 28 683L38 684Q48 685 67 686T104 688Q121 689 141 690T171 693T182 694H185V379Q185 62 186 60Q190 52 198 49Q219 46 247 46H263V0H255L232 1Q209 2 183 2T145 3T107 3T57 1L34 0H26V46H42Z"></path><path data-c="6F" d="M28 214Q28 309 93 378T250 448Q340 448 405 380T471 215Q471 120 407 55T250 -10Q153 -10 91 57T28 214ZM250 30Q372 30 372 193V225V250Q372 272 371 288T364 326T348 362T317 390T268 410Q263 411 252 411Q222 411 195 399Q152 377 139 338T126 246V226Q126 130 145 91Q177 30 250 30Z" transform="translate(278,0)"></path><path data-c="67" d="M329 409Q373 453 429 453Q459 453 472 434T485 396Q485 382 476 371T449 360Q416 360 412 390Q410 404 415 411Q415 412 416 414V415Q388 412 363 393Q355 388 355 386Q355 385 359 381T368 369T379 351T388 325T392 292Q392 230 343 187T222 143Q172 143 123 171Q112 153 112 133Q112 98 138 81Q147 75 155 75T227 73Q311 72 335 67Q396 58 431 26Q470 -13 470 -72Q470 -139 392 -175Q332 -206 250 -206Q167 -206 107 -175Q29 -140 29 -75Q29 -39 50 -15T92 18L103 24Q67 55 67 108Q67 155 96 193Q52 237 52 292Q52 355 102 398T223 442Q274 442 318 416L329 409ZM299 343Q294 371 273 387T221 404Q192 404 171 388T145 343Q142 326 142 292Q142 248 149 227T179 192Q196 182 222 182Q244 182 260 189T283 207T294 227T299 242Q302 258 302 292T299 343ZM403 -75Q403 -50 389 -34T348 -11T299 -2T245 0H218Q151 0 138 -6Q118 -15 107 -34T95 -74Q95 -84 101 -97T122 -127T170 -155T250 -167Q319 -167 361 -139T403 -75Z" transform="translate(778,0)"></path></g><g data-mml-node="mn" transform="translate(1311,-241.4) scale(0.707)"><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path></g></g><g data-mml-node="mo" transform="translate(1714.6,0)"><path data-c="2061" d=""></path></g><g data-mml-node="mi" transform="translate(1881.2,0)"><path data-c="1D45B" d="M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z"></path></g></g></g></svg></mjx-container></span>步，就算有2147483648个字节，也只需要31步。 这个思想被称作<strong>倍增</strong>，它能将线性时间内处理的问题转化为对数时间内处理的问题，是解决实际问题中非常有效且常用的方法。</p>
<p>方法(2)的思想是，要处理长为<span class="math inline"><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.025ex;" xmlns="http://www.w3.org/2000/svg" width="1.294ex" height="1.025ex" role="img" focusable="false" viewBox="0 -442 572 453"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D465" d="M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z"></path></g></g></g></svg></mjx-container></span>的字节，可以把它分为两段长为<span class="math inline"><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.566ex;" xmlns="http://www.w3.org/2000/svg" width="3.557ex" height="2.262ex" role="img" focusable="false" viewBox="0 -750 1572 1000"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D465" d="M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z"></path></g><g data-mml-node="TeXAtom" data-mjx-texclass="ORD" transform="translate(572,0)"><g data-mml-node="mo"><path data-c="2F" d="M423 750Q432 750 438 744T444 730Q444 725 271 248T92 -240Q85 -250 75 -250Q68 -250 62 -245T56 -231Q56 -221 230 257T407 740Q411 750 423 750Z"></path></g></g><g data-mml-node="mn" transform="translate(1072,0)"><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path></g></g></g></svg></mjx-container></span>的字节，这两段需要处理的问题是完全一样的。然后再把每一段分为更小的两段，这更小的两段要处理的问题也是完全一样的，直到分到每一段都变成最小的问题为止。 具体到本问题，我们首先给<code>[1,8]</code>字节赋值一个<code>0x55</code>，然后我们把问题拆成给<code>[1,4]</code>字节和<code>[5,8]</code>字节分别赋值<code>0x55</code>，通过左移32位把<code>[1,4]</code>字节的情况复制给了<code>[5,8]</code>字节。随后又把问题拆成了给<code>[1,2]</code>、<code>[3,4]</code>、<code>[5,6]</code>、<code>[7,8]</code>，通过把当前状况左移16位使得每一个区间都有一个<code>0x55</code>，最后再执行一次这样的操作，使得每一个字节都是<code>0x55</code>。 这个思想被称作<strong>分治</strong>。实际上，某些问题可以被拆分成两个完全相同的子问题，子问题又可以拆分成两个完全相同的子问题，直到我们可以直接给出子问题的答案，此时，父问题在知道子问题的答案后可以很方便的解决。类似(1)的分析，对于规模为<span class="math inline"><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.025ex;" xmlns="http://www.w3.org/2000/svg" width="1.357ex" height="1.025ex" role="img" focusable="false" viewBox="0 -442 600 453"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D45B" d="M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z"></path></g></g></g></svg></mjx-container></span>的问题，最多拆分<span class="math inline"><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.546ex;" xmlns="http://www.w3.org/2000/svg" width="5.614ex" height="2.116ex" role="img" focusable="false" viewBox="0 -694 2481.2 935.4"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msub"><g data-mml-node="mi"><path data-c="6C" d="M42 46H56Q95 46 103 60V68Q103 77 103 91T103 124T104 167T104 217T104 272T104 329Q104 366 104 407T104 482T104 542T103 586T103 603Q100 622 89 628T44 637H26V660Q26 683 28 683L38 684Q48 685 67 686T104 688Q121 689 141 690T171 693T182 694H185V379Q185 62 186 60Q190 52 198 49Q219 46 247 46H263V0H255L232 1Q209 2 183 2T145 3T107 3T57 1L34 0H26V46H42Z"></path><path data-c="6F" d="M28 214Q28 309 93 378T250 448Q340 448 405 380T471 215Q471 120 407 55T250 -10Q153 -10 91 57T28 214ZM250 30Q372 30 372 193V225V250Q372 272 371 288T364 326T348 362T317 390T268 410Q263 411 252 411Q222 411 195 399Q152 377 139 338T126 246V226Q126 130 145 91Q177 30 250 30Z" transform="translate(278,0)"></path><path data-c="67" d="M329 409Q373 453 429 453Q459 453 472 434T485 396Q485 382 476 371T449 360Q416 360 412 390Q410 404 415 411Q415 412 416 414V415Q388 412 363 393Q355 388 355 386Q355 385 359 381T368 369T379 351T388 325T392 292Q392 230 343 187T222 143Q172 143 123 171Q112 153 112 133Q112 98 138 81Q147 75 155 75T227 73Q311 72 335 67Q396 58 431 26Q470 -13 470 -72Q470 -139 392 -175Q332 -206 250 -206Q167 -206 107 -175Q29 -140 29 -75Q29 -39 50 -15T92 18L103 24Q67 55 67 108Q67 155 96 193Q52 237 52 292Q52 355 102 398T223 442Q274 442 318 416L329 409ZM299 343Q294 371 273 387T221 404Q192 404 171 388T145 343Q142 326 142 292Q142 248 149 227T179 192Q196 182 222 182Q244 182 260 189T283 207T294 227T299 242Q302 258 302 292T299 343ZM403 -75Q403 -50 389 -34T348 -11T299 -2T245 0H218Q151 0 138 -6Q118 -15 107 -34T95 -74Q95 -84 101 -97T122 -127T170 -155T250 -167Q319 -167 361 -139T403 -75Z" transform="translate(778,0)"></path></g><g data-mml-node="mn" transform="translate(1311,-241.4) scale(0.707)"><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path></g></g><g data-mml-node="mo" transform="translate(1714.6,0)"><path data-c="2061" d=""></path></g><g data-mml-node="mi" transform="translate(1881.2,0)"><path data-c="1D45B" d="M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z"></path></g></g></g></svg></mjx-container></span>次。给一个数组排序就可以用分治的思想来做，在本学期的数据结构课程中，各位将会学到基于分治思想的高效排序方法。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">oddParity</span><span class="params">(<span class="type">int</span> x)</span> {</span><br><span class="line">    <span class="type">int</span> pattern1 = <span class="number">0x55</span>, pattern2, pattern3, pattern4, fill1, fill2, fill3, fill4, ans;</span><br><span class="line">    fill1 = pattern1 &lt;&lt; <span class="number">16</span> | pattern1;</span><br><span class="line">    fill1 = fill1 &lt;&lt; <span class="number">8</span> | fill1;</span><br><span class="line">    ans = (x &amp; fill1) + (x &gt;&gt; <span class="number">1</span> &amp; fill1);</span><br><span class="line"></span><br><span class="line">    pattern2 = <span class="number">0x33</span>;</span><br><span class="line">    fill2 = pattern2 &lt;&lt; <span class="number">16</span> | pattern2;</span><br><span class="line">    fill2 = fill2 &lt;&lt; <span class="number">8</span> | fill2;</span><br><span class="line">    ans = (ans &amp; fill2) + (ans &gt;&gt; <span class="number">2</span> &amp; fill2);</span><br><span class="line"></span><br><span class="line">    pattern3 = <span class="number">0xF</span>;</span><br><span class="line">    fill3 = pattern3 &lt;&lt; <span class="number">16</span> | pattern3;</span><br><span class="line">    fill3 = fill3 &lt;&lt; <span class="number">8</span> | fill3;</span><br><span class="line">    ans = (ans &amp; fill3) + (ans &gt;&gt; <span class="number">4</span> &amp; fill3);</span><br><span class="line"></span><br><span class="line">    pattern4 = <span class="number">0xFF</span>;</span><br><span class="line">    fill4 = pattern4 &lt;&lt; <span class="number">16</span> | pattern4;</span><br><span class="line">    ans = (ans &amp; fill4) + (ans &gt;&gt; <span class="number">8</span> &amp; fill4);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> !(((ans &gt;&gt; <span class="number">16</span>) ^ ans) &amp; <span class="number">1</span>);</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<p>方法二：直接统计奇偶性 题目要求的是求出奇偶性，相当于我们的目的是把32位全部异或起来。类似上述的分治思想，我们首先把前16位和后16位异或起来，得到一个16位的数，再把它的前8位和后8位异或起来，以此类推，最后只剩一位，代表了是否有奇数个<code>1</code>。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">oddParity</span><span class="params">(<span class="type">int</span> x)</span> {</span><br><span class="line">    x = x ^ (x &gt;&gt; <span class="number">16</span>);</span><br><span class="line">    x = x ^ (x &gt;&gt; <span class="number">8</span>);</span><br><span class="line">    x = x ^ (x &gt;&gt; <span class="number">4</span>);</span><br><span class="line">    x = x ^ (x &gt;&gt; <span class="number">2</span>);</span><br><span class="line">    x = x ^ (x &gt;&gt; <span class="number">1</span>);</span><br><span class="line">    <span class="keyword">return</span> !(x &amp; <span class="number">1</span>);</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<h2 id="p21">P21</h2>
<blockquote>
<p>bitReverse - Reverse bits in an 32-bit integer Examples: bitReverse(0x80000004) = 0x20000001, bitReverse(0x7FFFFFFF) = 0xFFFFFFFE Legal ops: ! ~ &amp; ^ | + &lt;&lt; &gt;&gt; Max ops: 56 Challenge: You will get 1 extra point if you use less than or equal to 34 ops Rating: 2</p>
</blockquote>
<p>反转一个32位的二进制数。 本题的思想是经典的分治思想，先交换前16位和后16位，随后对于每16位，交换前8位和后8位，随后对于每8位，交换前4位和后4位，以此类推，最后得到的结果就是反转后的结果。 我们通过构造掩码来实现交换，值为1的位和值为0的位进行交换。节约操作符的关键步骤是下一个掩码是可以通过上一个掩码递推出来的，每次只需要两个操作符。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">bitReverse</span><span class="params">(<span class="type">int</span> x)</span> {</span><br><span class="line">    <span class="type">int</span> pat16 = <span class="number">0xFF</span>;</span><br><span class="line">    <span class="type">int</span> get16 = (pat16 &lt;&lt; <span class="number">8</span>) | pat16; <span class="comment">//00 00 FF FF</span></span><br><span class="line">    <span class="type">int</span> change16 = (x &lt;&lt; <span class="number">16</span>) | ((x &gt;&gt; <span class="number">16</span>) &amp; get16);<span class="comment">//EFGHABCD</span></span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> get8 = (get16 &lt;&lt; <span class="number">8</span>) ^ get16; <span class="comment">//00 FF 00 FF</span></span><br><span class="line">    <span class="type">int</span> change8 = ((change16 &amp; get8) &lt;&lt; <span class="number">8</span>) | ((change16 &gt;&gt; <span class="number">8</span>) &amp; get8);<span class="comment">//GHEFCDAB</span></span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> get4 = (get8 &lt;&lt; <span class="number">4</span>) ^ get8; <span class="comment">//0F 0F 0F 0F</span></span><br><span class="line">    <span class="type">int</span> change4 = ((change8 &amp; get4) &lt;&lt; <span class="number">4</span>) | ((change8 &gt;&gt; <span class="number">4</span>) &amp; get4);<span class="comment">//HGFEDCBA</span></span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> get2 = (get4 &lt;&lt; <span class="number">2</span>) ^ get4; <span class="comment">//33 33 33 33</span></span><br><span class="line">    <span class="type">int</span> change2 = ((change4 &amp; get2) &lt;&lt; <span class="number">2</span>) | ((change4 &gt;&gt; <span class="number">2</span>) &amp; get2);</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> get1 = (get2 &lt;&lt; <span class="number">1</span>) ^ get2;</span><br><span class="line">    <span class="keyword">return</span> ((change2 &amp; get1) &lt;&lt; <span class="number">1</span>) | ((change2 &gt;&gt; <span class="number">1</span>) &amp; get1);</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<h2 id="p22">P22</h2>
<blockquote>
<p>mod7 - calculate x mod 7 without using %. Example: mod7(99) = 1, mod7(-101) = -3 Legal ops: ! ~ &amp; ^ | + &lt;&lt; &gt;&gt; Max ops: 100 Challenge: You will get 2 extra point if you use less than or equal to 56 ops Rating: 2</p>
</blockquote>
<p>这次要计算的模数不是2的幂次了。但是<code>7</code>的二进制表示是<code>111</code>，这给我们提供了思路。观察发现，<code>001</code>、<code>001 000</code>、<code>001 000 000</code>模7的余数都是<code>1</code>；<code>010</code>、<code>010 000</code>、<code>010 000 000</code>模7的余数都是<code>2</code>；<code>100</code>、<code>100 000</code>、<code>100 000 000</code>模7的余数都是<code>3</code>，也就是说，每三位其实是等价的，我们只需要把所有的三位数加起来。虽然加起来这个和一般会超过7，但是其依然满足这个性质，再次把每三位加在一起，重复这个过程直到答案在<code>[0,7]</code>之间，需要注意<code>7%7=0</code>，所以如果得到<code>7</code>，需要把它变成<code>0</code>。 我们依然可以用类似P20方法一的方法，采用分治的思想来节约操作数。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">mod7</span><span class="params">(<span class="type">int</span> x)</span> {</span><br><span class="line">    <span class="type">int</span> signfill = x &gt;&gt; <span class="number">31</span>, first, fill, fill2, sum1, sum2, sum3, sumtwice, sumthree, overflow;</span><br><span class="line">    <span class="type">int</span> minint = signfill &amp; !((~x+<span class="number">1</span>)^x);</span><br><span class="line">    x += minint;</span><br><span class="line">    x = ((x ^ signfill) + (signfill &amp; <span class="number">1</span>));<span class="comment">//get abs</span></span><br><span class="line"></span><br><span class="line">    fill = <span class="number">0x7</span> &lt;&lt; <span class="number">12</span> | <span class="number">0x7</span>; <span class="comment">//0b000111 000000 000111</span></span><br><span class="line">    first = (fill &lt;&lt; <span class="number">6</span>) | (<span class="number">0x7</span> &lt;&lt; <span class="number">24</span>) | fill;<span class="comment">//0b000111 x 5</span></span><br><span class="line">    sum1 = (x &amp; first) + (x &gt;&gt; <span class="number">3</span> &amp; first) + (x &gt;&gt; <span class="number">30</span>);</span><br><span class="line"></span><br><span class="line">    fill2 = <span class="number">0x3F</span> &lt;&lt; <span class="number">12</span> | <span class="number">0x3F</span>;</span><br><span class="line">    sum2 = (sum1 &amp; fill2) + (sum1 &gt;&gt; <span class="number">6</span> &amp; fill2) + (sum1 &gt;&gt; <span class="number">24</span>);</span><br><span class="line"></span><br><span class="line">    sum3 = (sum2 &amp; <span class="number">0xFF</span>) + (sum2 &gt;&gt; <span class="number">12</span>);<span class="comment">//merge into one number</span></span><br><span class="line"></span><br><span class="line">    sumtwice = (sum3 &amp; <span class="number">7</span>) + (sum3 &gt;&gt; <span class="number">3</span> &amp; <span class="number">7</span>) + (sum3 &gt;&gt; <span class="number">6</span>);</span><br><span class="line">    sumthree = (sumtwice &amp; <span class="number">7</span>) + (sumtwice &gt;&gt; <span class="number">3</span>);</span><br><span class="line"></span><br><span class="line">    overflow = (~(!(<span class="number">7</span> ^ sumthree))) + <span class="number">1</span>;</span><br><span class="line">    sumthree = sumthree + (((~<span class="number">7</span>) + <span class="number">1</span>)&amp;overflow);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> (sumthree ^ signfill) + (signfill &amp; <span class="number">1</span>) + (~minint+<span class="number">1</span>);</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

  </div>
</article>



    </div>
    
      <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
         
          <li><a href="/ics/">Home</a></li>
         
          <li><a href="/ics/staff/">Staff</a></li>
         
          <li><a target="_blank" rel="noopener" href="https://github.com/cjinfdu/ics">Github</a></li>
        
      </ul>
    </div>

    <div id="toc-footer" style="display: none">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#p1"><span class="toc-number">1.</span> <span class="toc-text">P1</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#p2"><span class="toc-number">2.</span> <span class="toc-text">P2</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#p3"><span class="toc-number">3.</span> <span class="toc-text">P3</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#p4"><span class="toc-number">4.</span> <span class="toc-text">P4</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#p5"><span class="toc-number">5.</span> <span class="toc-text">P5</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#p6"><span class="toc-number">6.</span> <span class="toc-text">P6</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#p7"><span class="toc-number">7.</span> <span class="toc-text">P7</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#p8"><span class="toc-number">8.</span> <span class="toc-text">P8</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#p9"><span class="toc-number">9.</span> <span class="toc-text">P9</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#p10"><span class="toc-number">10.</span> <span class="toc-text">P10</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#p11"><span class="toc-number">11.</span> <span class="toc-text">P11</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#p12"><span class="toc-number">12.</span> <span class="toc-text">P12</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#p13"><span class="toc-number">13.</span> <span class="toc-text">P13</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#p14"><span class="toc-number">14.</span> <span class="toc-text">P14</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#p15"><span class="toc-number">15.</span> <span class="toc-text">P15</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#p16"><span class="toc-number">16.</span> <span class="toc-text">P16</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#p17"><span class="toc-number">17.</span> <span class="toc-text">P17</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#p18"><span class="toc-number">18.</span> <span class="toc-text">P18</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#p19"><span class="toc-number">19.</span> <span class="toc-text">P19</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#p20"><span class="toc-number">20.</span> <span class="toc-text">P20</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#p21"><span class="toc-number">21.</span> <span class="toc-text">P21</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#p22"><span class="toc-number">22.</span> <span class="toc-text">P22</span></a></li></ol>
    </div>

    <div id="share-footer" style="display: none">
      <ul>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=https://cjinfdu.github.io/ics/datalab-comment/"><i class="fa fa-facebook fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=https://cjinfdu.github.io/ics/datalab-comment/&text=DataLab writeup"><i class="fa fa-twitter fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=https://cjinfdu.github.io/ics/datalab-comment/&title=DataLab writeup"><i class="fa fa-linkedin fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=https://cjinfdu.github.io/ics/datalab-comment/&is_video=false&description=DataLab writeup"><i class="fa fa-pinterest fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=DataLab writeup&body=Check out this article: https://cjinfdu.github.io/ics/datalab-comment/"><i class="fa fa-envelope fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=https://cjinfdu.github.io/ics/datalab-comment/&title=DataLab writeup"><i class="fa fa-get-pocket fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=https://cjinfdu.github.io/ics/datalab-comment/&title=DataLab writeup"><i class="fa fa-reddit fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=https://cjinfdu.github.io/ics/datalab-comment/&title=DataLab writeup"><i class="fa fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=https://cjinfdu.github.io/ics/datalab-comment/&title=DataLab writeup"><i class="fa fa-digg fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=https://cjinfdu.github.io/ics/datalab-comment/&name=DataLab writeup&description="><i class="fa fa-tumblr fa-lg" aria-hidden="true"></i></a></li>
</ul>

    </div>

    <div id="actions-footer">
      <ul>
        <li id="toc"><a class="icon" href="#" onclick="$('#toc-footer').toggle();return false;"><i class="fa fa-list fa-lg" aria-hidden="true"></i> TOC</a></li>
        <li id="share"><a class="icon" href="#" onclick="$('#share-footer').toggle();return false;"><i class="fa fa-share-alt fa-lg" aria-hidden="true"></i> Share</a></li>
        <li id="top" style="display:none"><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up fa-lg" aria-hidden="true"></i> Top</a></li>
        <li id="menu"><a class="icon" href="#" onclick="$('#nav-footer').toggle();return false;"><i class="fa fa-bars fa-lg" aria-hidden="true"></i> Menu</a></li>
      </ul>
    </div>

  </div>
</div>

    
    <footer id="footer">
  <div class="footer-left">
    Copyright &copy; 2023 FDUICS-2023助教组
  </div>
  <div class="footer-right">
    <nav>
      <ul>
         
          <li><a href="/ics/">Home</a></li>
         
          <li><a href="/ics/staff/">Staff</a></li>
         
          <li><a target="_blank" rel="noopener" href="https://github.com/cjinfdu/ics">Github</a></li>
        
      </ul>
    </nav>
  </div>
</footer>

</body>
</html>
<!-- styles -->

<link rel="stylesheet" href="/ics/lib/font-awesome/css/font-awesome.min.css">


<link rel="stylesheet" href="/ics/lib/meslo-LG/styles.css">


<link rel="stylesheet" href="/ics/lib/justified-gallery/justifiedGallery.min.css">


<!-- jquery -->

<script src="/ics/lib/jquery/jquery.min.js"></script>


<script src="/ics/lib/justified-gallery/jquery.justifiedGallery.min.js"></script>


<script src="/ics/js/main.js"></script>





